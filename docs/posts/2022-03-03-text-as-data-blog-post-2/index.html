<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">

<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1"/>
  <meta name="generator" content="distill" />

  <style type="text/css">
  /* Hide doc at startup (prevent jankiness while JS renders/transforms) */
  body {
    visibility: hidden;
  }
  </style>

 <!--radix_placeholder_import_source-->
 <!--/radix_placeholder_import_source-->

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ad0000; } /* Alert */
code span.an { color: #5e5e5e; } /* Annotation */
code span.at { } /* Attribute */
code span.bn { color: #ad0000; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007ba5; } /* ControlFlow */
code span.ch { color: #20794d; } /* Char */
code span.cn { color: #8f5902; } /* Constant */
code span.co { color: #5e5e5e; } /* Comment */
code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
code span.dt { color: #ad0000; } /* DataType */
code span.dv { color: #ad0000; } /* DecVal */
code span.er { color: #ad0000; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #ad0000; } /* Float */
code span.fu { color: #4758ab; } /* Function */
code span.im { } /* Import */
code span.in { color: #5e5e5e; } /* Information */
code span.kw { color: #007ba5; } /* Keyword */
code span.op { color: #5e5e5e; } /* Operator */
code span.ot { color: #007ba5; } /* Other */
code span.pp { color: #ad0000; } /* Preprocessor */
code span.sc { color: #5e5e5e; } /* SpecialChar */
code span.ss { color: #20794d; } /* SpecialString */
code span.st { color: #20794d; } /* String */
code span.va { color: #111111; } /* Variable */
code span.vs { color: #20794d; } /* VerbatimString */
code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
</style>


  <!--radix_placeholder_meta_tags-->
<title>Noah_Milstein_Blog: Text as Data Blog Post 2</title>

<meta property="description" itemprop="description" content="A short description of the post."/>

<link rel="canonical" href="https://nmilsteinuma.github.io/posts/2022-03-03-text-as-data-blog-post-2/"/>

<!--  https://schema.org/Article -->
<meta property="article:published" itemprop="datePublished" content="2022-03-03"/>
<meta property="article:created" itemprop="dateCreated" content="2022-03-03"/>
<meta name="article:author" content="Noah Milstein"/>

<!--  https://developers.facebook.com/docs/sharing/webmasters#markup -->
<meta property="og:title" content="Noah_Milstein_Blog: Text as Data Blog Post 2"/>
<meta property="og:type" content="article"/>
<meta property="og:description" content="A short description of the post."/>
<meta property="og:url" content="https://nmilsteinuma.github.io/posts/2022-03-03-text-as-data-blog-post-2/"/>
<meta property="og:image" content="https://nmilsteinuma.github.io/posts/2022-03-03-text-as-data-blog-post-2/text-as-data-blog-post-2_files/figure-html5/unnamed-chunk-8-1.png"/>
<meta property="og:image:width" content="1248"/>
<meta property="og:image:height" content="768"/>
<meta property="og:locale" content="en_US"/>
<meta property="og:site_name" content="Noah_Milstein_Blog"/>

<!--  https://dev.twitter.com/cards/types/summary -->
<meta property="twitter:card" content="summary_large_image"/>
<meta property="twitter:title" content="Noah_Milstein_Blog: Text as Data Blog Post 2"/>
<meta property="twitter:description" content="A short description of the post."/>
<meta property="twitter:url" content="https://nmilsteinuma.github.io/posts/2022-03-03-text-as-data-blog-post-2/"/>
<meta property="twitter:image" content="https://nmilsteinuma.github.io/posts/2022-03-03-text-as-data-blog-post-2/text-as-data-blog-post-2_files/figure-html5/unnamed-chunk-8-1.png"/>
<meta property="twitter:image:width" content="1248"/>
<meta property="twitter:image:height" content="768"/>

<!--  https://scholar.google.com/intl/en/scholar/inclusion.html#indexing -->
<meta name="citation_title" content="Noah_Milstein_Blog: Text as Data Blog Post 2"/>
<meta name="citation_fulltext_html_url" content="https://nmilsteinuma.github.io/posts/2022-03-03-text-as-data-blog-post-2/"/>
<meta name="citation_online_date" content="2022/03/03"/>
<meta name="citation_publication_date" content="2022/03/03"/>
<meta name="citation_author" content="Noah Milstein"/>
<!--/radix_placeholder_meta_tags-->
  <!--radix_placeholder_rmarkdown_metadata-->

<script type="text/json" id="radix-rmarkdown-metadata">
{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["title","description","author","date","output","citation_url","canonical_url"]}},"value":[{"type":"character","attributes":{},"value":["Text as Data Blog Post 2"]},{"type":"character","attributes":{},"value":["A short description of the post."]},{"type":"list","attributes":{},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","url"]}},"value":[{"type":"character","attributes":{},"value":["Noah Milstein"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":[]}},"value":[]}]}]},{"type":"character","attributes":{},"value":["2022-03-03"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["distill::distill_article"]}},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["self_contained"]}},"value":[{"type":"logical","attributes":{},"value":[false]}]}]},{"type":"character","attributes":{},"value":["https://nmilsteinuma.github.io/posts/2022-03-03-text-as-data-blog-post-2/"]},{"type":"character","attributes":{},"value":["https://nmilsteinuma.github.io/posts/2022-03-03-text-as-data-blog-post-2/"]}]}
</script>
<!--/radix_placeholder_rmarkdown_metadata-->
  
  <script type="text/json" id="radix-resource-manifest">
  {"type":"character","attributes":{},"value":["text-as-data-blog-post-2_files/anchor-4.2.2/anchor.min.js","text-as-data-blog-post-2_files/bowser-1.9.3/bowser.min.js","text-as-data-blog-post-2_files/distill-2.2.21/template.v2.js","text-as-data-blog-post-2_files/figure-html5/unnamed-chunk-16-1.png","text-as-data-blog-post-2_files/figure-html5/unnamed-chunk-17-1.png","text-as-data-blog-post-2_files/figure-html5/unnamed-chunk-18-1.png","text-as-data-blog-post-2_files/figure-html5/unnamed-chunk-19-1.png","text-as-data-blog-post-2_files/figure-html5/unnamed-chunk-2-1.png","text-as-data-blog-post-2_files/figure-html5/unnamed-chunk-28-1.png","text-as-data-blog-post-2_files/figure-html5/unnamed-chunk-5-1.png","text-as-data-blog-post-2_files/figure-html5/unnamed-chunk-6-1.png","text-as-data-blog-post-2_files/figure-html5/unnamed-chunk-7-1.png","text-as-data-blog-post-2_files/figure-html5/unnamed-chunk-8-1.png","text-as-data-blog-post-2_files/figure-html5/unnamed-chunk-9-1.png","text-as-data-blog-post-2_files/header-attrs-2.11/header-attrs.js","text-as-data-blog-post-2_files/jquery-3.6.0/jquery-3.6.0.js","text-as-data-blog-post-2_files/jquery-3.6.0/jquery-3.6.0.min.js","text-as-data-blog-post-2_files/jquery-3.6.0/jquery-3.6.0.min.map","text-as-data-blog-post-2_files/popper-2.6.0/popper.min.js","text-as-data-blog-post-2_files/tippy-6.2.7/tippy-bundle.umd.min.js","text-as-data-blog-post-2_files/tippy-6.2.7/tippy-light-border.css","text-as-data-blog-post-2_files/tippy-6.2.7/tippy.css","text-as-data-blog-post-2_files/tippy-6.2.7/tippy.umd.min.js","text-as-data-blog-post-2_files/webcomponents-2.0.0/webcomponents.js"]}
  </script>
  <!--radix_placeholder_navigation_in_header-->
<meta name="distill:offset" content="../.."/>

<script type="application/javascript">

  window.headroom_prevent_pin = false;

  window.document.addEventListener("DOMContentLoaded", function (event) {

    // initialize headroom for banner
    var header = $('header').get(0);
    var headerHeight = header.offsetHeight;
    var headroom = new Headroom(header, {
      tolerance: 5,
      onPin : function() {
        if (window.headroom_prevent_pin) {
          window.headroom_prevent_pin = false;
          headroom.unpin();
        }
      }
    });
    headroom.init();
    if(window.location.hash)
      headroom.unpin();
    $(header).addClass('headroom--transition');

    // offset scroll location for banner on hash change
    // (see: https://github.com/WickyNilliams/headroom.js/issues/38)
    window.addEventListener("hashchange", function(event) {
      window.scrollTo(0, window.pageYOffset - (headerHeight + 25));
    });

    // responsive menu
    $('.distill-site-header').each(function(i, val) {
      var topnav = $(this);
      var toggle = topnav.find('.nav-toggle');
      toggle.on('click', function() {
        topnav.toggleClass('responsive');
      });
    });

    // nav dropdowns
    $('.nav-dropbtn').click(function(e) {
      $(this).next('.nav-dropdown-content').toggleClass('nav-dropdown-active');
      $(this).parent().siblings('.nav-dropdown')
         .children('.nav-dropdown-content').removeClass('nav-dropdown-active');
    });
    $("body").click(function(e){
      $('.nav-dropdown-content').removeClass('nav-dropdown-active');
    });
    $(".nav-dropdown").click(function(e){
      e.stopPropagation();
    });
  });
</script>

<style type="text/css">

/* Theme (user-documented overrideables for nav appearance) */

.distill-site-nav {
  color: rgba(255, 255, 255, 0.8);
  background-color: #0F2E3D;
  font-size: 15px;
  font-weight: 300;
}

.distill-site-nav a {
  color: inherit;
  text-decoration: none;
}

.distill-site-nav a:hover {
  color: white;
}

@media print {
  .distill-site-nav {
    display: none;
  }
}

.distill-site-header {

}

.distill-site-footer {

}


/* Site Header */

.distill-site-header {
  width: 100%;
  box-sizing: border-box;
  z-index: 3;
}

.distill-site-header .nav-left {
  display: inline-block;
  margin-left: 8px;
}

@media screen and (max-width: 768px) {
  .distill-site-header .nav-left {
    margin-left: 0;
  }
}


.distill-site-header .nav-right {
  float: right;
  margin-right: 8px;
}

.distill-site-header a,
.distill-site-header .title {
  display: inline-block;
  text-align: center;
  padding: 14px 10px 14px 10px;
}

.distill-site-header .title {
  font-size: 18px;
  min-width: 150px;
}

.distill-site-header .logo {
  padding: 0;
}

.distill-site-header .logo img {
  display: none;
  max-height: 20px;
  width: auto;
  margin-bottom: -4px;
}

.distill-site-header .nav-image img {
  max-height: 18px;
  width: auto;
  display: inline-block;
  margin-bottom: -3px;
}



@media screen and (min-width: 1000px) {
  .distill-site-header .logo img {
    display: inline-block;
  }
  .distill-site-header .nav-left {
    margin-left: 20px;
  }
  .distill-site-header .nav-right {
    margin-right: 20px;
  }
  .distill-site-header .title {
    padding-left: 12px;
  }
}


.distill-site-header .nav-toggle {
  display: none;
}

.nav-dropdown {
  display: inline-block;
  position: relative;
}

.nav-dropdown .nav-dropbtn {
  border: none;
  outline: none;
  color: rgba(255, 255, 255, 0.8);
  padding: 16px 10px;
  background-color: transparent;
  font-family: inherit;
  font-size: inherit;
  font-weight: inherit;
  margin: 0;
  margin-top: 1px;
  z-index: 2;
}

.nav-dropdown-content {
  display: none;
  position: absolute;
  background-color: white;
  min-width: 200px;
  border: 1px solid rgba(0,0,0,0.15);
  border-radius: 4px;
  box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.1);
  z-index: 1;
  margin-top: 2px;
  white-space: nowrap;
  padding-top: 4px;
  padding-bottom: 4px;
}

.nav-dropdown-content hr {
  margin-top: 4px;
  margin-bottom: 4px;
  border: none;
  border-bottom: 1px solid rgba(0, 0, 0, 0.1);
}

.nav-dropdown-active {
  display: block;
}

.nav-dropdown-content a, .nav-dropdown-content .nav-dropdown-header {
  color: black;
  padding: 6px 24px;
  text-decoration: none;
  display: block;
  text-align: left;
}

.nav-dropdown-content .nav-dropdown-header {
  display: block;
  padding: 5px 24px;
  padding-bottom: 0;
  text-transform: uppercase;
  font-size: 14px;
  color: #999999;
  white-space: nowrap;
}

.nav-dropdown:hover .nav-dropbtn {
  color: white;
}

.nav-dropdown-content a:hover {
  background-color: #ddd;
  color: black;
}

.nav-right .nav-dropdown-content {
  margin-left: -45%;
  right: 0;
}

@media screen and (max-width: 768px) {
  .distill-site-header a, .distill-site-header .nav-dropdown  {display: none;}
  .distill-site-header a.nav-toggle {
    float: right;
    display: block;
  }
  .distill-site-header .title {
    margin-left: 0;
  }
  .distill-site-header .nav-right {
    margin-right: 0;
  }
  .distill-site-header {
    overflow: hidden;
  }
  .nav-right .nav-dropdown-content {
    margin-left: 0;
  }
}


@media screen and (max-width: 768px) {
  .distill-site-header.responsive {position: relative; min-height: 500px; }
  .distill-site-header.responsive a.nav-toggle {
    position: absolute;
    right: 0;
    top: 0;
  }
  .distill-site-header.responsive a,
  .distill-site-header.responsive .nav-dropdown {
    display: block;
    text-align: left;
  }
  .distill-site-header.responsive .nav-left,
  .distill-site-header.responsive .nav-right {
    width: 100%;
  }
  .distill-site-header.responsive .nav-dropdown {float: none;}
  .distill-site-header.responsive .nav-dropdown-content {position: relative;}
  .distill-site-header.responsive .nav-dropdown .nav-dropbtn {
    display: block;
    width: 100%;
    text-align: left;
  }
}

/* Site Footer */

.distill-site-footer {
  width: 100%;
  overflow: hidden;
  box-sizing: border-box;
  z-index: 3;
  margin-top: 30px;
  padding-top: 30px;
  padding-bottom: 30px;
  text-align: center;
}

/* Headroom */

d-title {
  padding-top: 6rem;
}

@media print {
  d-title {
    padding-top: 4rem;
  }
}

.headroom {
  z-index: 1000;
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
}

.headroom--transition {
  transition: all .4s ease-in-out;
}

.headroom--unpinned {
  top: -100px;
}

.headroom--pinned {
  top: 0;
}

/* adjust viewport for navbar height */
/* helps vertically center bootstrap (non-distill) content */
.min-vh-100 {
  min-height: calc(100vh - 100px) !important;
}

</style>

<script src="../../site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<link href="../../site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet"/>
<link href="../../site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet"/>
<script src="../../site_libs/headroom-0.9.4/headroom.min.js"></script>
<script src="../../site_libs/autocomplete-0.37.1/autocomplete.min.js"></script>
<script src="../../site_libs/fuse-6.4.1/fuse.min.js"></script>

<script type="application/javascript">

function getMeta(metaName) {
  var metas = document.getElementsByTagName('meta');
  for (let i = 0; i < metas.length; i++) {
    if (metas[i].getAttribute('name') === metaName) {
      return metas[i].getAttribute('content');
    }
  }
  return '';
}

function offsetURL(url) {
  var offset = getMeta('distill:offset');
  return offset ? offset + '/' + url : url;
}

function createFuseIndex() {

  // create fuse index
  var options = {
    keys: [
      { name: 'title', weight: 20 },
      { name: 'categories', weight: 15 },
      { name: 'description', weight: 10 },
      { name: 'contents', weight: 5 },
    ],
    ignoreLocation: true,
    threshold: 0
  };
  var fuse = new window.Fuse([], options);

  // fetch the main search.json
  return fetch(offsetURL('search.json'))
    .then(function(response) {
      if (response.status == 200) {
        return response.json().then(function(json) {
          // index main articles
          json.articles.forEach(function(article) {
            fuse.add(article);
          });
          // download collections and index their articles
          return Promise.all(json.collections.map(function(collection) {
            return fetch(offsetURL(collection)).then(function(response) {
              if (response.status === 200) {
                return response.json().then(function(articles) {
                  articles.forEach(function(article) {
                    fuse.add(article);
                  });
                })
              } else {
                return Promise.reject(
                  new Error('Unexpected status from search index request: ' +
                            response.status)
                );
              }
            });
          })).then(function() {
            return fuse;
          });
        });

      } else {
        return Promise.reject(
          new Error('Unexpected status from search index request: ' +
                      response.status)
        );
      }
    });
}

window.document.addEventListener("DOMContentLoaded", function (event) {

  // get search element (bail if we don't have one)
  var searchEl = window.document.getElementById('distill-search');
  if (!searchEl)
    return;

  createFuseIndex()
    .then(function(fuse) {

      // make search box visible
      searchEl.classList.remove('hidden');

      // initialize autocomplete
      var options = {
        autoselect: true,
        hint: false,
        minLength: 2,
      };
      window.autocomplete(searchEl, options, [{
        source: function(query, callback) {
          const searchOptions = {
            isCaseSensitive: false,
            shouldSort: true,
            minMatchCharLength: 2,
            limit: 10,
          };
          var results = fuse.search(query, searchOptions);
          callback(results
            .map(function(result) { return result.item; })
          );
        },
        templates: {
          suggestion: function(suggestion) {
            var img = suggestion.preview && Object.keys(suggestion.preview).length > 0
              ? `<img src="${offsetURL(suggestion.preview)}"</img>`
              : '';
            var html = `
              <div class="search-item">
                <h3>${suggestion.title}</h3>
                <div class="search-item-description">
                  ${suggestion.description || ''}
                </div>
                <div class="search-item-preview">
                  ${img}
                </div>
              </div>
            `;
            return html;
          }
        }
      }]).on('autocomplete:selected', function(event, suggestion) {
        window.location.href = offsetURL(suggestion.path);
      });
      // remove inline display style on autocompleter (we want to
      // manage responsive display via css)
      $('.algolia-autocomplete').css("display", "");
    })
    .catch(function(error) {
      console.log(error);
    });

});

</script>

<style type="text/css">

.nav-search {
  font-size: x-small;
}

/* Algolioa Autocomplete */

.algolia-autocomplete {
  display: inline-block;
  margin-left: 10px;
  vertical-align: sub;
  background-color: white;
  color: black;
  padding: 6px;
  padding-top: 8px;
  padding-bottom: 0;
  border-radius: 6px;
  border: 1px #0F2E3D solid;
  width: 180px;
}


@media screen and (max-width: 768px) {
  .distill-site-nav .algolia-autocomplete {
    display: none;
    visibility: hidden;
  }
  .distill-site-nav.responsive .algolia-autocomplete {
    display: inline-block;
    visibility: visible;
  }
  .distill-site-nav.responsive .algolia-autocomplete .aa-dropdown-menu {
    margin-left: 0;
    width: 400px;
    max-height: 400px;
  }
}

.algolia-autocomplete .aa-input, .algolia-autocomplete .aa-hint {
  width: 90%;
  outline: none;
  border: none;
}

.algolia-autocomplete .aa-hint {
  color: #999;
}
.algolia-autocomplete .aa-dropdown-menu {
  width: 550px;
  max-height: 70vh;
  overflow-x: visible;
  overflow-y: scroll;
  padding: 5px;
  margin-top: 3px;
  margin-left: -150px;
  background-color: #fff;
  border-radius: 5px;
  border: 1px solid #999;
  border-top: none;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion {
  cursor: pointer;
  padding: 5px 4px;
  border-bottom: 1px solid #eee;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion:last-of-type {
  border-bottom: none;
  margin-bottom: 2px;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item {
  overflow: hidden;
  font-size: 0.8em;
  line-height: 1.4em;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item h3 {
  font-size: 1rem;
  margin-block-start: 0;
  margin-block-end: 5px;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item-description {
  display: inline-block;
  overflow: hidden;
  height: 2.8em;
  width: 80%;
  margin-right: 4%;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item-preview {
  display: inline-block;
  width: 15%;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item-preview img {
  height: 3em;
  width: auto;
  display: none;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item-preview img[src] {
  display: initial;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion.aa-cursor {
  background-color: #eee;
}
.algolia-autocomplete .aa-dropdown-menu .aa-suggestion em {
  font-weight: bold;
  font-style: normal;
}

</style>


<!--/radix_placeholder_navigation_in_header-->
  <!--radix_placeholder_distill-->

<style type="text/css">

body {
  background-color: white;
}

.pandoc-table {
  width: 100%;
}

.pandoc-table>caption {
  margin-bottom: 10px;
}

.pandoc-table th:not([align]) {
  text-align: left;
}

.pagedtable-footer {
  font-size: 15px;
}

d-byline .byline {
  grid-template-columns: 2fr 2fr;
}

d-byline .byline h3 {
  margin-block-start: 1.5em;
}

d-byline .byline .authors-affiliations h3 {
  margin-block-start: 0.5em;
}

.authors-affiliations .orcid-id {
  width: 16px;
  height:16px;
  margin-left: 4px;
  margin-right: 4px;
  vertical-align: middle;
  padding-bottom: 2px;
}

d-title .dt-tags {
  margin-top: 1em;
  grid-column: text;
}

.dt-tags .dt-tag {
  text-decoration: none;
  display: inline-block;
  color: rgba(0,0,0,0.6);
  padding: 0em 0.4em;
  margin-right: 0.5em;
  margin-bottom: 0.4em;
  font-size: 70%;
  border: 1px solid rgba(0,0,0,0.2);
  border-radius: 3px;
  text-transform: uppercase;
  font-weight: 500;
}

d-article table.gt_table td,
d-article table.gt_table th {
  border-bottom: none;
}

.html-widget {
  margin-bottom: 2.0em;
}

.l-screen-inset {
  padding-right: 16px;
}

.l-screen .caption {
  margin-left: 10px;
}

.shaded {
  background: rgb(247, 247, 247);
  padding-top: 20px;
  padding-bottom: 20px;
  border-top: 1px solid rgba(0, 0, 0, 0.1);
  border-bottom: 1px solid rgba(0, 0, 0, 0.1);
}

.shaded .html-widget {
  margin-bottom: 0;
  border: 1px solid rgba(0, 0, 0, 0.1);
}

.shaded .shaded-content {
  background: white;
}

.text-output {
  margin-top: 0;
  line-height: 1.5em;
}

.hidden {
  display: none !important;
}

d-article {
  padding-top: 2.5rem;
  padding-bottom: 30px;
}

d-appendix {
  padding-top: 30px;
}

d-article>p>img {
  width: 100%;
}

d-article h2 {
  margin: 1rem 0 1.5rem 0;
}

d-article h3 {
  margin-top: 1.5rem;
}

d-article iframe {
  border: 1px solid rgba(0, 0, 0, 0.1);
  margin-bottom: 2.0em;
  width: 100%;
}

/* Tweak code blocks */

d-article div.sourceCode code,
d-article pre code {
  font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
}

d-article pre,
d-article div.sourceCode,
d-article div.sourceCode pre {
  overflow: auto;
}

d-article div.sourceCode {
  background-color: white;
}

d-article div.sourceCode pre {
  padding-left: 10px;
  font-size: 12px;
  border-left: 2px solid rgba(0,0,0,0.1);
}

d-article pre {
  font-size: 12px;
  color: black;
  background: none;
  margin-top: 0;
  text-align: left;
  white-space: pre;
  word-spacing: normal;
  word-break: normal;
  word-wrap: normal;
  line-height: 1.5;

  -moz-tab-size: 4;
  -o-tab-size: 4;
  tab-size: 4;

  -webkit-hyphens: none;
  -moz-hyphens: none;
  -ms-hyphens: none;
  hyphens: none;
}

d-article pre a {
  border-bottom: none;
}

d-article pre a:hover {
  border-bottom: none;
  text-decoration: underline;
}

d-article details {
  grid-column: text;
  margin-bottom: 0.8em;
}

@media(min-width: 768px) {

d-article pre,
d-article div.sourceCode,
d-article div.sourceCode pre {
  overflow: visible !important;
}

d-article div.sourceCode pre {
  padding-left: 18px;
  font-size: 14px;
}

d-article pre {
  font-size: 14px;
}

}

figure img.external {
  background: white;
  border: 1px solid rgba(0, 0, 0, 0.1);
  box-shadow: 0 1px 8px rgba(0, 0, 0, 0.1);
  padding: 18px;
  box-sizing: border-box;
}

/* CSS for d-contents */

.d-contents {
  grid-column: text;
  color: rgba(0,0,0,0.8);
  font-size: 0.9em;
  padding-bottom: 1em;
  margin-bottom: 1em;
  padding-bottom: 0.5em;
  margin-bottom: 1em;
  padding-left: 0.25em;
  justify-self: start;
}

@media(min-width: 1000px) {
  .d-contents.d-contents-float {
    height: 0;
    grid-column-start: 1;
    grid-column-end: 4;
    justify-self: center;
    padding-right: 3em;
    padding-left: 2em;
  }
}

.d-contents nav h3 {
  font-size: 18px;
  margin-top: 0;
  margin-bottom: 1em;
}

.d-contents li {
  list-style-type: none
}

.d-contents nav > ul {
  padding-left: 0;
}

.d-contents ul {
  padding-left: 1em
}

.d-contents nav ul li {
  margin-top: 0.6em;
  margin-bottom: 0.2em;
}

.d-contents nav a {
  font-size: 13px;
  border-bottom: none;
  text-decoration: none
  color: rgba(0, 0, 0, 0.8);
}

.d-contents nav a:hover {
  text-decoration: underline solid rgba(0, 0, 0, 0.6)
}

.d-contents nav > ul > li > a {
  font-weight: 600;
}

.d-contents nav > ul > li > ul {
  font-weight: inherit;
}

.d-contents nav > ul > li > ul > li {
  margin-top: 0.2em;
}


.d-contents nav ul {
  margin-top: 0;
  margin-bottom: 0.25em;
}

.d-article-with-toc h2:nth-child(2) {
  margin-top: 0;
}


/* Figure */

.figure {
  position: relative;
  margin-bottom: 2.5em;
  margin-top: 1.5em;
}

.figure img {
  width: 100%;
}

.figure .caption {
  color: rgba(0, 0, 0, 0.6);
  font-size: 12px;
  line-height: 1.5em;
}

.figure img.external {
  background: white;
  border: 1px solid rgba(0, 0, 0, 0.1);
  box-shadow: 0 1px 8px rgba(0, 0, 0, 0.1);
  padding: 18px;
  box-sizing: border-box;
}

.figure .caption a {
  color: rgba(0, 0, 0, 0.6);
}

.figure .caption b,
.figure .caption strong, {
  font-weight: 600;
  color: rgba(0, 0, 0, 1.0);
}

/* Citations */

d-article .citation {
  color: inherit;
  cursor: inherit;
}

div.hanging-indent{
  margin-left: 1em; text-indent: -1em;
}

/* Citation hover box */

.tippy-box[data-theme~=light-border] {
  background-color: rgba(250, 250, 250, 0.95);
}

.tippy-content > p {
  margin-bottom: 0;
  padding: 2px;
}


/* Tweak 1000px media break to show more text */

@media(min-width: 1000px) {
  .base-grid,
  distill-header,
  d-title,
  d-abstract,
  d-article,
  d-appendix,
  distill-appendix,
  d-byline,
  d-footnote-list,
  d-citation-list,
  distill-footer {
    grid-template-columns: [screen-start] 1fr [page-start kicker-start] 80px [middle-start] 50px [text-start kicker-end] 65px 65px 65px 65px 65px 65px 65px 65px [text-end gutter-start] 65px [middle-end] 65px [page-end gutter-end] 1fr [screen-end];
    grid-column-gap: 16px;
  }

  .grid {
    grid-column-gap: 16px;
  }

  d-article {
    font-size: 1.06rem;
    line-height: 1.7em;
  }
  figure .caption, .figure .caption, figure figcaption {
    font-size: 13px;
  }
}

@media(min-width: 1180px) {
  .base-grid,
  distill-header,
  d-title,
  d-abstract,
  d-article,
  d-appendix,
  distill-appendix,
  d-byline,
  d-footnote-list,
  d-citation-list,
  distill-footer {
    grid-template-columns: [screen-start] 1fr [page-start kicker-start] 60px [middle-start] 60px [text-start kicker-end] 60px 60px 60px 60px 60px 60px 60px 60px [text-end gutter-start] 60px [middle-end] 60px [page-end gutter-end] 1fr [screen-end];
    grid-column-gap: 32px;
  }

  .grid {
    grid-column-gap: 32px;
  }
}


/* Get the citation styles for the appendix (not auto-injected on render since
   we do our own rendering of the citation appendix) */

d-appendix .citation-appendix,
.d-appendix .citation-appendix {
  font-size: 11px;
  line-height: 15px;
  border-left: 1px solid rgba(0, 0, 0, 0.1);
  padding-left: 18px;
  border: 1px solid rgba(0,0,0,0.1);
  background: rgba(0, 0, 0, 0.02);
  padding: 10px 18px;
  border-radius: 3px;
  color: rgba(150, 150, 150, 1);
  overflow: hidden;
  margin-top: -12px;
  white-space: pre-wrap;
  word-wrap: break-word;
}

/* Include appendix styles here so they can be overridden */

d-appendix {
  contain: layout style;
  font-size: 0.8em;
  line-height: 1.7em;
  margin-top: 60px;
  margin-bottom: 0;
  border-top: 1px solid rgba(0, 0, 0, 0.1);
  color: rgba(0,0,0,0.5);
  padding-top: 60px;
  padding-bottom: 48px;
}

d-appendix h3 {
  grid-column: page-start / text-start;
  font-size: 15px;
  font-weight: 500;
  margin-top: 1em;
  margin-bottom: 0;
  color: rgba(0,0,0,0.65);
}

d-appendix h3 + * {
  margin-top: 1em;
}

d-appendix ol {
  padding: 0 0 0 15px;
}

@media (min-width: 768px) {
  d-appendix ol {
    padding: 0 0 0 30px;
    margin-left: -30px;
  }
}

d-appendix li {
  margin-bottom: 1em;
}

d-appendix a {
  color: rgba(0, 0, 0, 0.6);
}

d-appendix > * {
  grid-column: text;
}

d-appendix > d-footnote-list,
d-appendix > d-citation-list,
d-appendix > distill-appendix {
  grid-column: screen;
}

/* Include footnote styles here so they can be overridden */

d-footnote-list {
  contain: layout style;
}

d-footnote-list > * {
  grid-column: text;
}

d-footnote-list a.footnote-backlink {
  color: rgba(0,0,0,0.3);
  padding-left: 0.5em;
}



/* Anchor.js */

.anchorjs-link {
  /*transition: all .25s linear; */
  text-decoration: none;
  border-bottom: none;
}
*:hover > .anchorjs-link {
  margin-left: -1.125em !important;
  text-decoration: none;
  border-bottom: none;
}

/* Social footer */

.social_footer {
  margin-top: 30px;
  margin-bottom: 0;
  color: rgba(0,0,0,0.67);
}

.disqus-comments {
  margin-right: 30px;
}

.disqus-comment-count {
  border-bottom: 1px solid rgba(0, 0, 0, 0.4);
  cursor: pointer;
}

#disqus_thread {
  margin-top: 30px;
}

.article-sharing a {
  border-bottom: none;
  margin-right: 8px;
}

.article-sharing a:hover {
  border-bottom: none;
}

.sidebar-section.subscribe {
  font-size: 12px;
  line-height: 1.6em;
}

.subscribe p {
  margin-bottom: 0.5em;
}


.article-footer .subscribe {
  font-size: 15px;
  margin-top: 45px;
}


.sidebar-section.custom {
  font-size: 12px;
  line-height: 1.6em;
}

.custom p {
  margin-bottom: 0.5em;
}

/* Styles for listing layout (hide title) */
.layout-listing d-title, .layout-listing .d-title {
  display: none;
}

/* Styles for posts lists (not auto-injected) */


.posts-with-sidebar {
  padding-left: 45px;
  padding-right: 45px;
}

.posts-list .description h2,
.posts-list .description p {
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
}

.posts-list .description h2 {
  font-weight: 700;
  border-bottom: none;
  padding-bottom: 0;
}

.posts-list h2.post-tag {
  border-bottom: 1px solid rgba(0, 0, 0, 0.2);
  padding-bottom: 12px;
}
.posts-list {
  margin-top: 60px;
  margin-bottom: 24px;
}

.posts-list .post-preview {
  text-decoration: none;
  overflow: hidden;
  display: block;
  border-bottom: 1px solid rgba(0, 0, 0, 0.1);
  padding: 24px 0;
}

.post-preview-last {
  border-bottom: none !important;
}

.posts-list .posts-list-caption {
  grid-column: screen;
  font-weight: 400;
}

.posts-list .post-preview h2 {
  margin: 0 0 6px 0;
  line-height: 1.2em;
  font-style: normal;
  font-size: 24px;
}

.posts-list .post-preview p {
  margin: 0 0 12px 0;
  line-height: 1.4em;
  font-size: 16px;
}

.posts-list .post-preview .thumbnail {
  box-sizing: border-box;
  margin-bottom: 24px;
  position: relative;
  max-width: 500px;
}
.posts-list .post-preview img {
  width: 100%;
  display: block;
}

.posts-list .metadata {
  font-size: 12px;
  line-height: 1.4em;
  margin-bottom: 18px;
}

.posts-list .metadata > * {
  display: inline-block;
}

.posts-list .metadata .publishedDate {
  margin-right: 2em;
}

.posts-list .metadata .dt-authors {
  display: block;
  margin-top: 0.3em;
  margin-right: 2em;
}

.posts-list .dt-tags {
  display: block;
  line-height: 1em;
}

.posts-list .dt-tags .dt-tag {
  display: inline-block;
  color: rgba(0,0,0,0.6);
  padding: 0.3em 0.4em;
  margin-right: 0.2em;
  margin-bottom: 0.4em;
  font-size: 60%;
  border: 1px solid rgba(0,0,0,0.2);
  border-radius: 3px;
  text-transform: uppercase;
  font-weight: 500;
}

.posts-list img {
  opacity: 1;
}

.posts-list img[data-src] {
  opacity: 0;
}

.posts-more {
  clear: both;
}


.posts-sidebar {
  font-size: 16px;
}

.posts-sidebar h3 {
  font-size: 16px;
  margin-top: 0;
  margin-bottom: 0.5em;
  font-weight: 400;
  text-transform: uppercase;
}

.sidebar-section {
  margin-bottom: 30px;
}

.categories ul {
  list-style-type: none;
  margin: 0;
  padding: 0;
}

.categories li {
  color: rgba(0, 0, 0, 0.8);
  margin-bottom: 0;
}

.categories li>a {
  border-bottom: none;
}

.categories li>a:hover {
  border-bottom: 1px solid rgba(0, 0, 0, 0.4);
}

.categories .active {
  font-weight: 600;
}

.categories .category-count {
  color: rgba(0, 0, 0, 0.4);
}


@media(min-width: 768px) {
  .posts-list .post-preview h2 {
    font-size: 26px;
  }
  .posts-list .post-preview .thumbnail {
    float: right;
    width: 30%;
    margin-bottom: 0;
  }
  .posts-list .post-preview .description {
    float: left;
    width: 45%;
  }
  .posts-list .post-preview .metadata {
    float: left;
    width: 20%;
    margin-top: 8px;
  }
  .posts-list .post-preview p {
    margin: 0 0 12px 0;
    line-height: 1.5em;
    font-size: 16px;
  }
  .posts-with-sidebar .posts-list {
    float: left;
    width: 75%;
  }
  .posts-with-sidebar .posts-sidebar {
    float: right;
    width: 20%;
    margin-top: 60px;
    padding-top: 24px;
    padding-bottom: 24px;
  }
}


/* Improve display for browsers without grid (IE/Edge <= 15) */

.downlevel {
  line-height: 1.6em;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
  margin: 0;
}

.downlevel .d-title {
  padding-top: 6rem;
  padding-bottom: 1.5rem;
}

.downlevel .d-title h1 {
  font-size: 50px;
  font-weight: 700;
  line-height: 1.1em;
  margin: 0 0 0.5rem;
}

.downlevel .d-title p {
  font-weight: 300;
  font-size: 1.2rem;
  line-height: 1.55em;
  margin-top: 0;
}

.downlevel .d-byline {
  padding-top: 0.8em;
  padding-bottom: 0.8em;
  font-size: 0.8rem;
  line-height: 1.8em;
}

.downlevel .section-separator {
  border: none;
  border-top: 1px solid rgba(0, 0, 0, 0.1);
}

.downlevel .d-article {
  font-size: 1.06rem;
  line-height: 1.7em;
  padding-top: 1rem;
  padding-bottom: 2rem;
}


.downlevel .d-appendix {
  padding-left: 0;
  padding-right: 0;
  max-width: none;
  font-size: 0.8em;
  line-height: 1.7em;
  margin-bottom: 0;
  color: rgba(0,0,0,0.5);
  padding-top: 40px;
  padding-bottom: 48px;
}

.downlevel .footnotes ol {
  padding-left: 13px;
}

.downlevel .base-grid,
.downlevel .distill-header,
.downlevel .d-title,
.downlevel .d-abstract,
.downlevel .d-article,
.downlevel .d-appendix,
.downlevel .distill-appendix,
.downlevel .d-byline,
.downlevel .d-footnote-list,
.downlevel .d-citation-list,
.downlevel .distill-footer,
.downlevel .appendix-bottom,
.downlevel .posts-container {
  padding-left: 40px;
  padding-right: 40px;
}

@media(min-width: 768px) {
  .downlevel .base-grid,
  .downlevel .distill-header,
  .downlevel .d-title,
  .downlevel .d-abstract,
  .downlevel .d-article,
  .downlevel .d-appendix,
  .downlevel .distill-appendix,
  .downlevel .d-byline,
  .downlevel .d-footnote-list,
  .downlevel .d-citation-list,
  .downlevel .distill-footer,
  .downlevel .appendix-bottom,
  .downlevel .posts-container {
  padding-left: 150px;
  padding-right: 150px;
  max-width: 900px;
}
}

.downlevel pre code {
  display: block;
  border-left: 2px solid rgba(0, 0, 0, .1);
  padding: 0 0 0 20px;
  font-size: 14px;
}

.downlevel code, .downlevel pre {
  color: black;
  background: none;
  font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
  text-align: left;
  white-space: pre;
  word-spacing: normal;
  word-break: normal;
  word-wrap: normal;
  line-height: 1.5;

  -moz-tab-size: 4;
  -o-tab-size: 4;
  tab-size: 4;

  -webkit-hyphens: none;
  -moz-hyphens: none;
  -ms-hyphens: none;
  hyphens: none;
}

.downlevel .posts-list .post-preview {
  color: inherit;
}



</style>

<script type="application/javascript">

function is_downlevel_browser() {
  if (bowser.isUnsupportedBrowser({ msie: "12", msedge: "16"},
                                 window.navigator.userAgent)) {
    return true;
  } else {
    return window.load_distill_framework === undefined;
  }
}

// show body when load is complete
function on_load_complete() {

  // add anchors
  if (window.anchors) {
    window.anchors.options.placement = 'left';
    window.anchors.add('d-article > h2, d-article > h3, d-article > h4, d-article > h5');
  }


  // set body to visible
  document.body.style.visibility = 'visible';

  // force redraw for leaflet widgets
  if (window.HTMLWidgets) {
    var maps = window.HTMLWidgets.findAll(".leaflet");
    $.each(maps, function(i, el) {
      var map = this.getMap();
      map.invalidateSize();
      map.eachLayer(function(layer) {
        if (layer instanceof L.TileLayer)
          layer.redraw();
      });
    });
  }

  // trigger 'shown' so htmlwidgets resize
  $('d-article').trigger('shown');
}

function init_distill() {

  init_common();

  // create front matter
  var front_matter = $('<d-front-matter></d-front-matter>');
  $('#distill-front-matter').wrap(front_matter);

  // create d-title
  $('.d-title').changeElementType('d-title');

  // create d-byline
  var byline = $('<d-byline></d-byline>');
  $('.d-byline').replaceWith(byline);

  // create d-article
  var article = $('<d-article></d-article>');
  $('.d-article').wrap(article).children().unwrap();

  // move posts container into article
  $('.posts-container').appendTo($('d-article'));

  // create d-appendix
  $('.d-appendix').changeElementType('d-appendix');

  // flag indicating that we have appendix items
  var appendix = $('.appendix-bottom').children('h3').length > 0;

  // replace footnotes with <d-footnote>
  $('.footnote-ref').each(function(i, val) {
    appendix = true;
    var href = $(this).attr('href');
    var id = href.replace('#', '');
    var fn = $('#' + id);
    var fn_p = $('#' + id + '>p');
    fn_p.find('.footnote-back').remove();
    var text = fn_p.html();
    var dtfn = $('<d-footnote></d-footnote>');
    dtfn.html(text);
    $(this).replaceWith(dtfn);
  });
  // remove footnotes
  $('.footnotes').remove();

  // move refs into #references-listing
  $('#references-listing').replaceWith($('#refs'));

  $('h1.appendix, h2.appendix').each(function(i, val) {
    $(this).changeElementType('h3');
  });
  $('h3.appendix').each(function(i, val) {
    var id = $(this).attr('id');
    $('.d-contents a[href="#' + id + '"]').parent().remove();
    appendix = true;
    $(this).nextUntil($('h1, h2, h3')).addBack().appendTo($('d-appendix'));
  });

  // show d-appendix if we have appendix content
  $("d-appendix").css('display', appendix ? 'grid' : 'none');

  // localize layout chunks to just output
  $('.layout-chunk').each(function(i, val) {

    // capture layout
    var layout = $(this).attr('data-layout');

    // apply layout to markdown level block elements
    var elements = $(this).children().not('details, div.sourceCode, pre, script');
    elements.each(function(i, el) {
      var layout_div = $('<div class="' + layout + '"></div>');
      if (layout_div.hasClass('shaded')) {
        var shaded_content = $('<div class="shaded-content"></div>');
        $(this).wrap(shaded_content);
        $(this).parent().wrap(layout_div);
      } else {
        $(this).wrap(layout_div);
      }
    });


    // unwrap the layout-chunk div
    $(this).children().unwrap();
  });

  // remove code block used to force  highlighting css
  $('.distill-force-highlighting-css').parent().remove();

  // remove empty line numbers inserted by pandoc when using a
  // custom syntax highlighting theme
  $('code.sourceCode a:empty').remove();

  // load distill framework
  load_distill_framework();

  // wait for window.distillRunlevel == 4 to do post processing
  function distill_post_process() {

    if (!window.distillRunlevel || window.distillRunlevel < 4)
      return;

    // hide author/affiliations entirely if we have no authors
    var front_matter = JSON.parse($("#distill-front-matter").html());
    var have_authors = front_matter.authors && front_matter.authors.length > 0;
    if (!have_authors)
      $('d-byline').addClass('hidden');

    // article with toc class
    $('.d-contents').parent().addClass('d-article-with-toc');

    // strip links that point to #
    $('.authors-affiliations').find('a[href="#"]').removeAttr('href');

    // add orcid ids
    $('.authors-affiliations').find('.author').each(function(i, el) {
      var orcid_id = front_matter.authors[i].orcidID;
      if (orcid_id) {
        var a = $('<a></a>');
        a.attr('href', 'https://orcid.org/' + orcid_id);
        var img = $('<img></img>');
        img.addClass('orcid-id');
        img.attr('alt', 'ORCID ID');
        img.attr('src','data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo1N0NEMjA4MDI1MjA2ODExOTk0QzkzNTEzRjZEQTg1NyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDozM0NDOEJGNEZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDozM0NDOEJGM0ZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkZDN0YxMTc0MDcyMDY4MTE5NUZFRDc5MUM2MUUwNEREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjU3Q0QyMDgwMjUyMDY4MTE5OTRDOTM1MTNGNkRBODU3Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+84NovQAAAR1JREFUeNpiZEADy85ZJgCpeCB2QJM6AMQLo4yOL0AWZETSqACk1gOxAQN+cAGIA4EGPQBxmJA0nwdpjjQ8xqArmczw5tMHXAaALDgP1QMxAGqzAAPxQACqh4ER6uf5MBlkm0X4EGayMfMw/Pr7Bd2gRBZogMFBrv01hisv5jLsv9nLAPIOMnjy8RDDyYctyAbFM2EJbRQw+aAWw/LzVgx7b+cwCHKqMhjJFCBLOzAR6+lXX84xnHjYyqAo5IUizkRCwIENQQckGSDGY4TVgAPEaraQr2a4/24bSuoExcJCfAEJihXkWDj3ZAKy9EJGaEo8T0QSxkjSwORsCAuDQCD+QILmD1A9kECEZgxDaEZhICIzGcIyEyOl2RkgwAAhkmC+eAm0TAAAAABJRU5ErkJggg==');
        a.append(img);
        $(this).append(a);
      }
    });

    // hide elements of author/affiliations grid that have no value
    function hide_byline_column(caption) {
      $('d-byline').find('h3:contains("' + caption + '")').parent().css('visibility', 'hidden');
    }

    // affiliations
    var have_affiliations = false;
    for (var i = 0; i<front_matter.authors.length; ++i) {
      var author = front_matter.authors[i];
      if (author.affiliation !== "&nbsp;") {
        have_affiliations = true;
        break;
      }
    }
    if (!have_affiliations)
      $('d-byline').find('h3:contains("Affiliations")').css('visibility', 'hidden');

    // published date
    if (!front_matter.publishedDate)
      hide_byline_column("Published");

    // document object identifier
    var doi = $('d-byline').find('h3:contains("DOI")');
    var doi_p = doi.next().empty();
    if (!front_matter.doi) {
      // if we have a citation and valid citationText then link to that
      if ($('#citation').length > 0 && front_matter.citationText) {
        doi.html('Citation');
        $('<a href="#citation"></a>')
          .text(front_matter.citationText)
          .appendTo(doi_p);
      } else {
        hide_byline_column("DOI");
      }
    } else {
      $('<a></a>')
         .attr('href', "https://doi.org/" + front_matter.doi)
         .html(front_matter.doi)
         .appendTo(doi_p);
    }

     // change plural form of authors/affiliations
    if (front_matter.authors.length === 1) {
      var grid = $('.authors-affiliations');
      grid.children('h3:contains("Authors")').text('Author');
      grid.children('h3:contains("Affiliations")').text('Affiliation');
    }

    // remove d-appendix and d-footnote-list local styles
    $('d-appendix > style:first-child').remove();
    $('d-footnote-list > style:first-child').remove();

    // move appendix-bottom entries to the bottom
    $('.appendix-bottom').appendTo('d-appendix').children().unwrap();
    $('.appendix-bottom').remove();

    // hoverable references
    $('span.citation[data-cites]').each(function() {
      var refs = $(this).attr('data-cites').split(" ");
      var refHtml = refs.map(function(ref) {
        return "<p>" + $('#ref-' + ref).html() + "</p>";
      }).join("\n");
      window.tippy(this, {
        allowHTML: true,
        content: refHtml,
        maxWidth: 500,
        interactive: true,
        interactiveBorder: 10,
        theme: 'light-border',
        placement: 'bottom-start'
      });
    });

    // clear polling timer
    clearInterval(tid);

    // show body now that everything is ready
    on_load_complete();
  }

  var tid = setInterval(distill_post_process, 50);
  distill_post_process();

}

function init_downlevel() {

  init_common();

   // insert hr after d-title
  $('.d-title').after($('<hr class="section-separator"/>'));

  // check if we have authors
  var front_matter = JSON.parse($("#distill-front-matter").html());
  var have_authors = front_matter.authors && front_matter.authors.length > 0;

  // manage byline/border
  if (!have_authors)
    $('.d-byline').remove();
  $('.d-byline').after($('<hr class="section-separator"/>'));
  $('.d-byline a').remove();

  // remove toc
  $('.d-contents').remove();

  // move appendix elements
  $('h1.appendix, h2.appendix').each(function(i, val) {
    $(this).changeElementType('h3');
  });
  $('h3.appendix').each(function(i, val) {
    $(this).nextUntil($('h1, h2, h3')).addBack().appendTo($('.d-appendix'));
  });


  // inject headers into references and footnotes
  var refs_header = $('<h3></h3>');
  refs_header.text('References');
  $('#refs').prepend(refs_header);

  var footnotes_header = $('<h3></h3');
  footnotes_header.text('Footnotes');
  $('.footnotes').children('hr').first().replaceWith(footnotes_header);

  // move appendix-bottom entries to the bottom
  $('.appendix-bottom').appendTo('.d-appendix').children().unwrap();
  $('.appendix-bottom').remove();

  // remove appendix if it's empty
  if ($('.d-appendix').children().length === 0)
    $('.d-appendix').remove();

  // prepend separator above appendix
  $('.d-appendix').before($('<hr class="section-separator" style="clear: both"/>'));

  // trim code
  $('pre>code').each(function(i, val) {
    $(this).html($.trim($(this).html()));
  });

  // move posts-container right before article
  $('.posts-container').insertBefore($('.d-article'));

  $('body').addClass('downlevel');

  on_load_complete();
}


function init_common() {

  // jquery plugin to change element types
  (function($) {
    $.fn.changeElementType = function(newType) {
      var attrs = {};

      $.each(this[0].attributes, function(idx, attr) {
        attrs[attr.nodeName] = attr.nodeValue;
      });

      this.replaceWith(function() {
        return $("<" + newType + "/>", attrs).append($(this).contents());
      });
    };
  })(jQuery);

  // prevent underline for linked images
  $('a > img').parent().css({'border-bottom' : 'none'});

  // mark non-body figures created by knitr chunks as 100% width
  $('.layout-chunk').each(function(i, val) {
    var figures = $(this).find('img, .html-widget');
    if ($(this).attr('data-layout') !== "l-body") {
      figures.css('width', '100%');
    } else {
      figures.css('max-width', '100%');
      figures.filter("[width]").each(function(i, val) {
        var fig = $(this);
        fig.css('width', fig.attr('width') + 'px');
      });

    }
  });

  // auto-append index.html to post-preview links in file: protocol
  // and in rstudio ide preview
  $('.post-preview').each(function(i, val) {
    if (window.location.protocol === "file:")
      $(this).attr('href', $(this).attr('href') + "index.html");
  });

  // get rid of index.html references in header
  if (window.location.protocol !== "file:") {
    $('.distill-site-header a[href]').each(function(i,val) {
      $(this).attr('href', $(this).attr('href').replace("index.html", "./"));
    });
  }

  // add class to pandoc style tables
  $('tr.header').parent('thead').parent('table').addClass('pandoc-table');
  $('.kable-table').children('table').addClass('pandoc-table');

  // add figcaption style to table captions
  $('caption').parent('table').addClass("figcaption");

  // initialize posts list
  if (window.init_posts_list)
    window.init_posts_list();

  // implmement disqus comment link
  $('.disqus-comment-count').click(function() {
    window.headroom_prevent_pin = true;
    $('#disqus_thread').toggleClass('hidden');
    if (!$('#disqus_thread').hasClass('hidden')) {
      var offset = $(this).offset();
      $(window).resize();
      $('html, body').animate({
        scrollTop: offset.top - 35
      });
    }
  });
}

document.addEventListener('DOMContentLoaded', function() {
  if (is_downlevel_browser())
    init_downlevel();
  else
    window.addEventListener('WebComponentsReady', init_distill);
});

</script>

<!--/radix_placeholder_distill-->
  <script src="../../site_libs/header-attrs-2.11/header-attrs.js"></script>
  <script src="../../site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
  <script src="../../site_libs/popper-2.6.0/popper.min.js"></script>
  <link href="../../site_libs/tippy-6.2.7/tippy.css" rel="stylesheet" />
  <link href="../../site_libs/tippy-6.2.7/tippy-light-border.css" rel="stylesheet" />
  <script src="../../site_libs/tippy-6.2.7/tippy.umd.min.js"></script>
  <script src="../../site_libs/anchor-4.2.2/anchor.min.js"></script>
  <script src="../../site_libs/bowser-1.9.3/bowser.min.js"></script>
  <script src="../../site_libs/webcomponents-2.0.0/webcomponents.js"></script>
  <script src="../../site_libs/distill-2.2.21/template.v2.js"></script>
  <!--radix_placeholder_site_in_header-->
<!--/radix_placeholder_site_in_header-->


</head>

<body>

<!--radix_placeholder_front_matter-->

<script id="distill-front-matter" type="text/json">
{"title":"Text as Data Blog Post 2","description":"A short description of the post.","authors":[{"author":"Noah Milstein","authorURL":{},"affiliation":"&nbsp;","affiliationURL":"#","orcidID":""}],"publishedDate":"2022-03-03T00:00:00.000-05:00","citationText":"Milstein, 2022"}
</script>

<!--/radix_placeholder_front_matter-->
<!--radix_placeholder_navigation_before_body-->
<header class="header header--fixed" role="banner">
<nav class="distill-site-nav distill-site-header">
<div class="nav-left">
<a href="../../index.html" class="title">Noah_Milstein_Blog</a>
<input id="distill-search" class="nav-search hidden" type="text" placeholder="Search..."/>
</div>
<div class="nav-right">
<a href="../../index.html">Home</a>
<a href="../../about.html">About</a>
<a href="javascript:void(0);" class="nav-toggle">&#9776;</a>
</div>
</nav>
</header>
<!--/radix_placeholder_navigation_before_body-->
<!--radix_placeholder_site_before_body-->
<!--/radix_placeholder_site_before_body-->

<div class="d-title">
<h1>Text as Data Blog Post 2</h1>
<!--radix_placeholder_categories-->
<!--/radix_placeholder_categories-->
<p><p>A short description of the post.</p></p>
</div>

<div class="d-byline">
  Noah Milstein true 
  
<br/>2022-03-03
</div>

<div class="d-article">
<div class="layout-chunk" data-layout="l-body">

</div>
<h3 id="blog-post-2">Blog Post 2:</h3>
<p><strong>Question:</strong> For my second blog post I will be
observing the content of the sub-reddit I am scraping, extracting
information, and performing initial natural language processing and text
analysis on it.</p>
<p>Navigate and describe the characteristics of the data source of your
interest, if youve specified one (or plan B). The characteristics
include (1) its content and/or (2) how it can be scraped. The
characteristics include</p>
<ol type="1">
<li>its content and/or (2) how it can be scraped. I Summon up your
knowledge of some useful packages weve reviewed</li>
</ol>
<p>and/or NLP tools in relation to your research project.</p>
<p>I Summon up your knowledge of some useful packages weve reviewed
and/or NLP tools in relation to your research project. Sorting out
adjectives? Extracting major verbs or named entities? </p>
<h4 id="inital-loading-and-processing">Inital Loading and
Processing</h4>
<p><strong>Explanation:</strong> My code below illustrates how I
initially got my information from reddit by scraping. In this case I
used RedditExtractoR. The author of this packages describes it as a
minimalist r wrapper it scrapes a limited number of posts from reddit.
The api on reddit itself only allows 60 requests per minute so I will
have to extract the next set of data later and pick a period before my
first post occured.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'>#top_guns_urls &lt;- find_thread_urls(subreddit="guns", sort_by="top")</span>

<span class='fu'><a href='https://rdrr.io/r/base/load.html'>load</a></span><span class='op'>(</span><span class='st'>"/Users/noahmilstein/Desktop/Spring 2022/Textasdata/text_as_data_work/df_guns.RData"</span><span class='op'>)</span>

<span class='fu'><a href='https://rdrr.io/r/utils/str.html'>str</a></span><span class='op'>(</span><span class='va'>top_guns_urls</span><span class='op'>)</span>

<span class='va'>top_guns_urls_df</span><span class='op'>=</span><span class='va'>top_guns_urls</span><span class='op'>[</span>,<span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"title"</span>, <span class='st'>"date_utc"</span>, <span class='st'>"comments"</span><span class='op'>)</span><span class='op'>]</span>
<span class='va'>top_guns_urls_df</span>
<span class='co'>#guns_contents &lt;- get_thread_content(top_guns_urls_df$url[1:1000])</span>
<span class='co'>#str(guns_contents$threads)</span>
</code></pre>
</div>
</div>
<h4 id="conversion-from-data-frame-to-corpus">Conversion From Data Frame
to Corpus</h4>
<p><strong>Explanation:</strong> Below I have processed my inital
dataframe from reddit into a corpus.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>top_guns_urls_df</span><span class='op'>=</span><span class='va'>top_guns_urls</span><span class='op'>[</span>,<span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"title"</span>, <span class='st'>"date_utc"</span>, <span class='st'>"comments"</span><span class='op'>)</span><span class='op'>]</span>

<span class='va'>top_guns_corpus</span><span class='op'>&lt;-</span><span class='fu'>corpus</span><span class='op'>(</span><span class='va'>top_guns_urls_df</span><span class='op'>$</span><span class='va'>title</span><span class='op'>)</span>

<span class='va'>top_guns_documents</span><span class='op'>&lt;-</span><span class='va'>top_guns_corpus</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>:</span><span class='fl'>10</span>,<span class='op'>]</span>

<span class='va'>top_guns_corpus_summary</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/summary.html'>summary</a></span><span class='op'>(</span><span class='va'>top_guns_corpus</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<h4 id="pre-processing">Pre-processing</h4>
<p><strong>Explanation:</strong> Next I used the
factorial_preprocessing() command to both use n-grams processing and use
an infrequent term threshold.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>preprocessed_documents</span> <span class='op'>&lt;-</span> <span class='fu'>factorial_preprocessing</span><span class='op'>(</span>
    <span class='va'>top_guns_corpus</span>,
    use_ngrams <span class='op'>=</span> <span class='cn'>TRUE</span>,
    infrequent_term_threshold <span class='op'>=</span> <span class='fl'>0.2</span>,
    verbose <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>Preprocessing 998 documents 128 different ways...</code></pre>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/names.html'>names</a></span><span class='op'>(</span><span class='va'>preprocessed_documents</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>[1] &quot;choices&quot;  &quot;dfm_list&quot; &quot;labels&quot;  </code></pre>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='va'>preprocessed_documents</span><span class='op'>$</span><span class='va'>choices</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>              removePunctuation removeNumbers lowercase stem
P-N-L-S-W-I-3              TRUE          TRUE      TRUE TRUE
N-L-S-W-I-3               FALSE          TRUE      TRUE TRUE
P-L-S-W-I-3                TRUE         FALSE      TRUE TRUE
L-S-W-I-3                 FALSE         FALSE      TRUE TRUE
P-N-S-W-I-3                TRUE          TRUE     FALSE TRUE
N-S-W-I-3                 FALSE          TRUE     FALSE TRUE
              removeStopwords infrequent_terms use_ngrams
P-N-L-S-W-I-3            TRUE             TRUE       TRUE
N-L-S-W-I-3              TRUE             TRUE       TRUE
P-L-S-W-I-3              TRUE             TRUE       TRUE
L-S-W-I-3                TRUE             TRUE       TRUE
P-N-S-W-I-3              TRUE             TRUE       TRUE
N-S-W-I-3                TRUE             TRUE       TRUE</code></pre>
</div>
<h4 id="pretext-results">preText Results</h4>
<p><strong>Explanation:</strong> Next I used preText() to pre-process
the documents that I have so far to acquire pre-text scores that can
give me a sense of what techniques may be necessary for natural language
processing as the project develops.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'>#preText_results &lt;- preText(</span>
<span class='co'>#    preprocessed_documents,</span>
<span class='co'>#    dataset_name = "Gun Pretext Results",</span>
<span class='co'>#    distance_method = "cosine",</span>
<span class='co'>#    num_comparisons = 50,</span>
<span class='co'>#    verbose = TRUE)</span>
</code></pre>
</div>
</div>
<p><strong>Explanation Continued:</strong> Next we look at the pre-text
scores with 50 comparisons, which was acquired from the code above.
Below these are graphed with intercept.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/load.html'>load</a></span><span class='op'>(</span><span class='st'>"/Users/noahmilstein/Desktop/Spring 2022/Textasdata/text_as_data_work/preText_results_gun_50_comps.RData"</span><span class='op'>)</span>
<span class='va'>preText_results</span>
</code></pre>
</div>
<pre><code>$preText_scores
    preText_score preprocessing_steps
1      0.06027612       P-N-L-S-W-I-3
2      0.11514514         N-L-S-W-I-3
3      0.06027612         P-L-S-W-I-3
4      0.11514514           L-S-W-I-3
5      0.06027612         P-N-S-W-I-3
6      0.11514514           N-S-W-I-3
7      0.06027612           P-S-W-I-3
8      0.11514514             S-W-I-3
9      0.06027612         P-N-L-W-I-3
10     0.11514514           N-L-W-I-3
11     0.06027612           P-L-W-I-3
12     0.11514514             L-W-I-3
13     0.06027612           P-N-W-I-3
14     0.11514514             N-W-I-3
15     0.06027612             P-W-I-3
16     0.11514514               W-I-3
17     0.12148443         P-N-L-S-I-3
18     0.11269453           N-L-S-I-3
19     0.12148443           P-L-S-I-3
20     0.11269453             L-S-I-3
21     0.12148443           P-N-S-I-3
22     0.11269453             N-S-I-3
23     0.12148443             P-S-I-3
24     0.11269453               S-I-3
25     0.12148443           P-N-L-I-3
26     0.11269453             N-L-I-3
27     0.12148443             P-L-I-3
28     0.11269453               L-I-3
29     0.12148443             P-N-I-3
30     0.11269453               N-I-3
31     0.12148443               P-I-3
32     0.11269453                 I-3
33     0.04832774         P-N-L-S-W-3
34     0.05870234           N-L-S-W-3
35     0.05016423           P-L-S-W-3
36     0.05870234             L-S-W-3
37     0.04832774           P-N-S-W-3
38     0.05870234             N-S-W-3
39     0.05016423             P-S-W-3
40     0.05870234               S-W-3
41     0.04545867           P-N-L-W-3
42     0.04809353             N-L-W-3
43     0.04701070             P-L-W-3
44     0.04809353               L-W-3
45     0.04545867             P-N-W-3
46     0.04809353               N-W-3
47     0.04701070               P-W-3
48     0.04809353                 W-3
49     0.04373030           P-N-L-S-3
50     0.03917853             N-L-S-3
51     0.04519765             P-L-S-3
52     0.04158180               L-S-3
53     0.04373030             P-N-S-3
54     0.03917853               N-S-3
55     0.04519765               P-S-3
56     0.04171593                 S-3
57     0.04373030             P-N-L-3
58     0.03917853               N-L-3
59     0.04519765               P-L-3
60     0.04174744                 L-3
61     0.04373030               P-N-3
62     0.03917853                 N-3
63     0.04519765                 P-3
64     0.04174744                   3
65     0.06027612         P-N-L-S-W-I
66     0.11514514           N-L-S-W-I
67     0.06027612           P-L-S-W-I
68     0.11514514             L-S-W-I
69     0.06027612           P-N-S-W-I
70     0.11514514             N-S-W-I
71     0.06027612             P-S-W-I
72     0.11514514               S-W-I
73     0.06027612           P-N-L-W-I
74     0.11514514             N-L-W-I
75     0.06027612             P-L-W-I
76     0.11514514               L-W-I
77     0.06027612             P-N-W-I
78     0.11514514               N-W-I
79     0.06027612               P-W-I
80     0.11514514                 W-I
81     0.12148443           P-N-L-S-I
82     0.11269453             N-L-S-I
83     0.12148443             P-L-S-I
84     0.11269453               L-S-I
85     0.12148443             P-N-S-I
86     0.11269453               N-S-I
87     0.12148443               P-S-I
88     0.11269453                 S-I
89     0.12148443             P-N-L-I
90     0.11269453               N-L-I
91     0.12148443               P-L-I
92     0.11269453                 L-I
93     0.12148443               P-N-I
94     0.11269453                 N-I
95     0.12148443                 P-I
96     0.11269453                   I
97     0.04832774           P-N-L-S-W
98     0.10967625             N-L-S-W
99     0.05016423             P-L-S-W
100    0.10577509               L-S-W
101    0.04832774             P-N-S-W
102    0.10279038               N-S-W
103    0.05016423               P-S-W
104    0.09876319                 S-W
105    0.04545867             P-N-L-W
106    0.04755966               N-L-W
107    0.04701070               P-L-W
108    0.04755966                 L-W
109    0.04545867               P-N-W
110    0.04755966                 N-W
111    0.04701070                 P-W
112    0.04755966                   W
113    0.04313762             P-N-L-S
114    0.17027068               N-L-S
115    0.04553693               P-L-S
116    0.26094816                 L-S
117    0.04313762               P-N-S
118    0.16421569                 N-S
119    0.04553693                 P-S
120    0.25780314                   S
121    0.04313762               P-N-L
122    0.04289388                 N-L
123    0.04553693                 P-L
124    0.13531564                   L
125    0.04313762                 P-N
126    0.04289388                   N
127    0.04553693                   P

$ranked_preText_scores
    preText_score preprocessing_steps
1      0.26094816                 L-S
2      0.25780314                   S
3      0.17027068               N-L-S
4      0.16421569                 N-S
5      0.13531564                   L
6      0.12148443         P-N-L-S-I-3
7      0.12148443           P-L-S-I-3
8      0.12148443           P-N-S-I-3
9      0.12148443             P-S-I-3
10     0.12148443           P-N-L-I-3
11     0.12148443             P-L-I-3
12     0.12148443             P-N-I-3
13     0.12148443               P-I-3
14     0.12148443           P-N-L-S-I
15     0.12148443             P-L-S-I
16     0.12148443             P-N-S-I
17     0.12148443               P-S-I
18     0.12148443             P-N-L-I
19     0.12148443               P-L-I
20     0.12148443               P-N-I
21     0.12148443                 P-I
22     0.11514514         N-L-S-W-I-3
23     0.11514514           L-S-W-I-3
24     0.11514514           N-S-W-I-3
25     0.11514514             S-W-I-3
26     0.11514514           N-L-W-I-3
27     0.11514514             L-W-I-3
28     0.11514514             N-W-I-3
29     0.11514514               W-I-3
30     0.11514514           N-L-S-W-I
31     0.11514514             L-S-W-I
32     0.11514514             N-S-W-I
33     0.11514514               S-W-I
34     0.11514514             N-L-W-I
35     0.11514514               L-W-I
36     0.11514514               N-W-I
37     0.11514514                 W-I
38     0.11269453           N-L-S-I-3
39     0.11269453             L-S-I-3
40     0.11269453             N-S-I-3
41     0.11269453               S-I-3
42     0.11269453             N-L-I-3
43     0.11269453               L-I-3
44     0.11269453               N-I-3
45     0.11269453                 I-3
46     0.11269453             N-L-S-I
47     0.11269453               L-S-I
48     0.11269453               N-S-I
49     0.11269453                 S-I
50     0.11269453               N-L-I
51     0.11269453                 L-I
52     0.11269453                 N-I
53     0.11269453                   I
54     0.10967625             N-L-S-W
55     0.10577509               L-S-W
56     0.10279038               N-S-W
57     0.09876319                 S-W
58     0.06027612       P-N-L-S-W-I-3
59     0.06027612         P-L-S-W-I-3
60     0.06027612         P-N-S-W-I-3
61     0.06027612           P-S-W-I-3
62     0.06027612         P-N-L-W-I-3
63     0.06027612           P-L-W-I-3
64     0.06027612           P-N-W-I-3
65     0.06027612             P-W-I-3
66     0.06027612         P-N-L-S-W-I
67     0.06027612           P-L-S-W-I
68     0.06027612           P-N-S-W-I
69     0.06027612             P-S-W-I
70     0.06027612           P-N-L-W-I
71     0.06027612             P-L-W-I
72     0.06027612             P-N-W-I
73     0.06027612               P-W-I
74     0.05870234           N-L-S-W-3
75     0.05870234             L-S-W-3
76     0.05870234             N-S-W-3
77     0.05870234               S-W-3
78     0.05016423           P-L-S-W-3
79     0.05016423             P-S-W-3
80     0.05016423             P-L-S-W
81     0.05016423               P-S-W
82     0.04832774         P-N-L-S-W-3
83     0.04832774           P-N-S-W-3
84     0.04832774           P-N-L-S-W
85     0.04832774             P-N-S-W
86     0.04809353             N-L-W-3
87     0.04809353               L-W-3
88     0.04809353               N-W-3
89     0.04809353                 W-3
90     0.04755966               N-L-W
91     0.04755966                 L-W
92     0.04755966                 N-W
93     0.04755966                   W
94     0.04701070             P-L-W-3
95     0.04701070               P-W-3
96     0.04701070               P-L-W
97     0.04701070                 P-W
98     0.04553693               P-L-S
99     0.04553693                 P-S
100    0.04553693                 P-L
101    0.04553693                   P
102    0.04545867           P-N-L-W-3
103    0.04545867             P-N-W-3
104    0.04545867             P-N-L-W
105    0.04545867               P-N-W
106    0.04519765             P-L-S-3
107    0.04519765               P-S-3
108    0.04519765               P-L-3
109    0.04519765                 P-3
110    0.04373030           P-N-L-S-3
111    0.04373030             P-N-S-3
112    0.04373030             P-N-L-3
113    0.04373030               P-N-3
114    0.04313762             P-N-L-S
115    0.04313762               P-N-S
116    0.04313762               P-N-L
117    0.04313762                 P-N
118    0.04289388                 N-L
119    0.04289388                   N
120    0.04174744                 L-3
121    0.04174744                   3
122    0.04171593                 S-3
123    0.04158180               L-S-3
124    0.03917853             N-L-S-3
125    0.03917853               N-S-3
126    0.03917853               N-L-3
127    0.03917853                 N-3

$choices
              removePunctuation removeNumbers lowercase  stem
P-N-L-S-W-I-3              TRUE          TRUE      TRUE  TRUE
N-L-S-W-I-3               FALSE          TRUE      TRUE  TRUE
P-L-S-W-I-3                TRUE         FALSE      TRUE  TRUE
L-S-W-I-3                 FALSE         FALSE      TRUE  TRUE
P-N-S-W-I-3                TRUE          TRUE     FALSE  TRUE
N-S-W-I-3                 FALSE          TRUE     FALSE  TRUE
P-S-W-I-3                  TRUE         FALSE     FALSE  TRUE
S-W-I-3                   FALSE         FALSE     FALSE  TRUE
P-N-L-W-I-3                TRUE          TRUE      TRUE FALSE
N-L-W-I-3                 FALSE          TRUE      TRUE FALSE
P-L-W-I-3                  TRUE         FALSE      TRUE FALSE
L-W-I-3                   FALSE         FALSE      TRUE FALSE
P-N-W-I-3                  TRUE          TRUE     FALSE FALSE
N-W-I-3                   FALSE          TRUE     FALSE FALSE
P-W-I-3                    TRUE         FALSE     FALSE FALSE
W-I-3                     FALSE         FALSE     FALSE FALSE
P-N-L-S-I-3                TRUE          TRUE      TRUE  TRUE
N-L-S-I-3                 FALSE          TRUE      TRUE  TRUE
P-L-S-I-3                  TRUE         FALSE      TRUE  TRUE
L-S-I-3                   FALSE         FALSE      TRUE  TRUE
P-N-S-I-3                  TRUE          TRUE     FALSE  TRUE
N-S-I-3                   FALSE          TRUE     FALSE  TRUE
P-S-I-3                    TRUE         FALSE     FALSE  TRUE
S-I-3                     FALSE         FALSE     FALSE  TRUE
P-N-L-I-3                  TRUE          TRUE      TRUE FALSE
N-L-I-3                   FALSE          TRUE      TRUE FALSE
P-L-I-3                    TRUE         FALSE      TRUE FALSE
L-I-3                     FALSE         FALSE      TRUE FALSE
P-N-I-3                    TRUE          TRUE     FALSE FALSE
N-I-3                     FALSE          TRUE     FALSE FALSE
P-I-3                      TRUE         FALSE     FALSE FALSE
I-3                       FALSE         FALSE     FALSE FALSE
P-N-L-S-W-3                TRUE          TRUE      TRUE  TRUE
N-L-S-W-3                 FALSE          TRUE      TRUE  TRUE
P-L-S-W-3                  TRUE         FALSE      TRUE  TRUE
L-S-W-3                   FALSE         FALSE      TRUE  TRUE
P-N-S-W-3                  TRUE          TRUE     FALSE  TRUE
N-S-W-3                   FALSE          TRUE     FALSE  TRUE
P-S-W-3                    TRUE         FALSE     FALSE  TRUE
S-W-3                     FALSE         FALSE     FALSE  TRUE
P-N-L-W-3                  TRUE          TRUE      TRUE FALSE
N-L-W-3                   FALSE          TRUE      TRUE FALSE
P-L-W-3                    TRUE         FALSE      TRUE FALSE
L-W-3                     FALSE         FALSE      TRUE FALSE
P-N-W-3                    TRUE          TRUE     FALSE FALSE
N-W-3                     FALSE          TRUE     FALSE FALSE
P-W-3                      TRUE         FALSE     FALSE FALSE
W-3                       FALSE         FALSE     FALSE FALSE
P-N-L-S-3                  TRUE          TRUE      TRUE  TRUE
N-L-S-3                   FALSE          TRUE      TRUE  TRUE
P-L-S-3                    TRUE         FALSE      TRUE  TRUE
L-S-3                     FALSE         FALSE      TRUE  TRUE
P-N-S-3                    TRUE          TRUE     FALSE  TRUE
N-S-3                     FALSE          TRUE     FALSE  TRUE
P-S-3                      TRUE         FALSE     FALSE  TRUE
S-3                       FALSE         FALSE     FALSE  TRUE
P-N-L-3                    TRUE          TRUE      TRUE FALSE
N-L-3                     FALSE          TRUE      TRUE FALSE
P-L-3                      TRUE         FALSE      TRUE FALSE
L-3                       FALSE         FALSE      TRUE FALSE
P-N-3                      TRUE          TRUE     FALSE FALSE
N-3                       FALSE          TRUE     FALSE FALSE
P-3                        TRUE         FALSE     FALSE FALSE
3                         FALSE         FALSE     FALSE FALSE
P-N-L-S-W-I                TRUE          TRUE      TRUE  TRUE
N-L-S-W-I                 FALSE          TRUE      TRUE  TRUE
P-L-S-W-I                  TRUE         FALSE      TRUE  TRUE
L-S-W-I                   FALSE         FALSE      TRUE  TRUE
P-N-S-W-I                  TRUE          TRUE     FALSE  TRUE
N-S-W-I                   FALSE          TRUE     FALSE  TRUE
P-S-W-I                    TRUE         FALSE     FALSE  TRUE
S-W-I                     FALSE         FALSE     FALSE  TRUE
P-N-L-W-I                  TRUE          TRUE      TRUE FALSE
N-L-W-I                   FALSE          TRUE      TRUE FALSE
P-L-W-I                    TRUE         FALSE      TRUE FALSE
L-W-I                     FALSE         FALSE      TRUE FALSE
P-N-W-I                    TRUE          TRUE     FALSE FALSE
N-W-I                     FALSE          TRUE     FALSE FALSE
P-W-I                      TRUE         FALSE     FALSE FALSE
W-I                       FALSE         FALSE     FALSE FALSE
P-N-L-S-I                  TRUE          TRUE      TRUE  TRUE
N-L-S-I                   FALSE          TRUE      TRUE  TRUE
P-L-S-I                    TRUE         FALSE      TRUE  TRUE
L-S-I                     FALSE         FALSE      TRUE  TRUE
P-N-S-I                    TRUE          TRUE     FALSE  TRUE
N-S-I                     FALSE          TRUE     FALSE  TRUE
P-S-I                      TRUE         FALSE     FALSE  TRUE
S-I                       FALSE         FALSE     FALSE  TRUE
P-N-L-I                    TRUE          TRUE      TRUE FALSE
N-L-I                     FALSE          TRUE      TRUE FALSE
P-L-I                      TRUE         FALSE      TRUE FALSE
L-I                       FALSE         FALSE      TRUE FALSE
P-N-I                      TRUE          TRUE     FALSE FALSE
N-I                       FALSE          TRUE     FALSE FALSE
P-I                        TRUE         FALSE     FALSE FALSE
I                         FALSE         FALSE     FALSE FALSE
P-N-L-S-W                  TRUE          TRUE      TRUE  TRUE
N-L-S-W                   FALSE          TRUE      TRUE  TRUE
P-L-S-W                    TRUE         FALSE      TRUE  TRUE
L-S-W                     FALSE         FALSE      TRUE  TRUE
P-N-S-W                    TRUE          TRUE     FALSE  TRUE
N-S-W                     FALSE          TRUE     FALSE  TRUE
P-S-W                      TRUE         FALSE     FALSE  TRUE
S-W                       FALSE         FALSE     FALSE  TRUE
P-N-L-W                    TRUE          TRUE      TRUE FALSE
N-L-W                     FALSE          TRUE      TRUE FALSE
P-L-W                      TRUE         FALSE      TRUE FALSE
L-W                       FALSE         FALSE      TRUE FALSE
P-N-W                      TRUE          TRUE     FALSE FALSE
N-W                       FALSE          TRUE     FALSE FALSE
P-W                        TRUE         FALSE     FALSE FALSE
W                         FALSE         FALSE     FALSE FALSE
P-N-L-S                    TRUE          TRUE      TRUE  TRUE
N-L-S                     FALSE          TRUE      TRUE  TRUE
P-L-S                      TRUE         FALSE      TRUE  TRUE
L-S                       FALSE         FALSE      TRUE  TRUE
P-N-S                      TRUE          TRUE     FALSE  TRUE
N-S                       FALSE          TRUE     FALSE  TRUE
P-S                        TRUE         FALSE     FALSE  TRUE
S                         FALSE         FALSE     FALSE  TRUE
P-N-L                      TRUE          TRUE      TRUE FALSE
N-L                       FALSE          TRUE      TRUE FALSE
P-L                        TRUE         FALSE      TRUE FALSE
L                         FALSE         FALSE      TRUE FALSE
P-N                        TRUE          TRUE     FALSE FALSE
N                         FALSE          TRUE     FALSE FALSE
P                          TRUE         FALSE     FALSE FALSE
                          FALSE         FALSE     FALSE FALSE
              removeStopwords infrequent_terms use_ngrams
P-N-L-S-W-I-3            TRUE             TRUE       TRUE
N-L-S-W-I-3              TRUE             TRUE       TRUE
P-L-S-W-I-3              TRUE             TRUE       TRUE
L-S-W-I-3                TRUE             TRUE       TRUE
P-N-S-W-I-3              TRUE             TRUE       TRUE
N-S-W-I-3                TRUE             TRUE       TRUE
P-S-W-I-3                TRUE             TRUE       TRUE
S-W-I-3                  TRUE             TRUE       TRUE
P-N-L-W-I-3              TRUE             TRUE       TRUE
N-L-W-I-3                TRUE             TRUE       TRUE
P-L-W-I-3                TRUE             TRUE       TRUE
L-W-I-3                  TRUE             TRUE       TRUE
P-N-W-I-3                TRUE             TRUE       TRUE
N-W-I-3                  TRUE             TRUE       TRUE
P-W-I-3                  TRUE             TRUE       TRUE
W-I-3                    TRUE             TRUE       TRUE
P-N-L-S-I-3             FALSE             TRUE       TRUE
N-L-S-I-3               FALSE             TRUE       TRUE
P-L-S-I-3               FALSE             TRUE       TRUE
L-S-I-3                 FALSE             TRUE       TRUE
P-N-S-I-3               FALSE             TRUE       TRUE
N-S-I-3                 FALSE             TRUE       TRUE
P-S-I-3                 FALSE             TRUE       TRUE
S-I-3                   FALSE             TRUE       TRUE
P-N-L-I-3               FALSE             TRUE       TRUE
N-L-I-3                 FALSE             TRUE       TRUE
P-L-I-3                 FALSE             TRUE       TRUE
L-I-3                   FALSE             TRUE       TRUE
P-N-I-3                 FALSE             TRUE       TRUE
N-I-3                   FALSE             TRUE       TRUE
P-I-3                   FALSE             TRUE       TRUE
I-3                     FALSE             TRUE       TRUE
P-N-L-S-W-3              TRUE            FALSE       TRUE
N-L-S-W-3                TRUE            FALSE       TRUE
P-L-S-W-3                TRUE            FALSE       TRUE
L-S-W-3                  TRUE            FALSE       TRUE
P-N-S-W-3                TRUE            FALSE       TRUE
N-S-W-3                  TRUE            FALSE       TRUE
P-S-W-3                  TRUE            FALSE       TRUE
S-W-3                    TRUE            FALSE       TRUE
P-N-L-W-3                TRUE            FALSE       TRUE
N-L-W-3                  TRUE            FALSE       TRUE
P-L-W-3                  TRUE            FALSE       TRUE
L-W-3                    TRUE            FALSE       TRUE
P-N-W-3                  TRUE            FALSE       TRUE
N-W-3                    TRUE            FALSE       TRUE
P-W-3                    TRUE            FALSE       TRUE
W-3                      TRUE            FALSE       TRUE
P-N-L-S-3               FALSE            FALSE       TRUE
N-L-S-3                 FALSE            FALSE       TRUE
P-L-S-3                 FALSE            FALSE       TRUE
L-S-3                   FALSE            FALSE       TRUE
P-N-S-3                 FALSE            FALSE       TRUE
N-S-3                   FALSE            FALSE       TRUE
P-S-3                   FALSE            FALSE       TRUE
S-3                     FALSE            FALSE       TRUE
P-N-L-3                 FALSE            FALSE       TRUE
N-L-3                   FALSE            FALSE       TRUE
P-L-3                   FALSE            FALSE       TRUE
L-3                     FALSE            FALSE       TRUE
P-N-3                   FALSE            FALSE       TRUE
N-3                     FALSE            FALSE       TRUE
P-3                     FALSE            FALSE       TRUE
3                       FALSE            FALSE       TRUE
P-N-L-S-W-I              TRUE             TRUE      FALSE
N-L-S-W-I                TRUE             TRUE      FALSE
P-L-S-W-I                TRUE             TRUE      FALSE
L-S-W-I                  TRUE             TRUE      FALSE
P-N-S-W-I                TRUE             TRUE      FALSE
N-S-W-I                  TRUE             TRUE      FALSE
P-S-W-I                  TRUE             TRUE      FALSE
S-W-I                    TRUE             TRUE      FALSE
P-N-L-W-I                TRUE             TRUE      FALSE
N-L-W-I                  TRUE             TRUE      FALSE
P-L-W-I                  TRUE             TRUE      FALSE
L-W-I                    TRUE             TRUE      FALSE
P-N-W-I                  TRUE             TRUE      FALSE
N-W-I                    TRUE             TRUE      FALSE
P-W-I                    TRUE             TRUE      FALSE
W-I                      TRUE             TRUE      FALSE
P-N-L-S-I               FALSE             TRUE      FALSE
N-L-S-I                 FALSE             TRUE      FALSE
P-L-S-I                 FALSE             TRUE      FALSE
L-S-I                   FALSE             TRUE      FALSE
P-N-S-I                 FALSE             TRUE      FALSE
N-S-I                   FALSE             TRUE      FALSE
P-S-I                   FALSE             TRUE      FALSE
S-I                     FALSE             TRUE      FALSE
P-N-L-I                 FALSE             TRUE      FALSE
N-L-I                   FALSE             TRUE      FALSE
P-L-I                   FALSE             TRUE      FALSE
L-I                     FALSE             TRUE      FALSE
P-N-I                   FALSE             TRUE      FALSE
N-I                     FALSE             TRUE      FALSE
P-I                     FALSE             TRUE      FALSE
I                       FALSE             TRUE      FALSE
P-N-L-S-W                TRUE            FALSE      FALSE
N-L-S-W                  TRUE            FALSE      FALSE
P-L-S-W                  TRUE            FALSE      FALSE
L-S-W                    TRUE            FALSE      FALSE
P-N-S-W                  TRUE            FALSE      FALSE
N-S-W                    TRUE            FALSE      FALSE
P-S-W                    TRUE            FALSE      FALSE
S-W                      TRUE            FALSE      FALSE
P-N-L-W                  TRUE            FALSE      FALSE
N-L-W                    TRUE            FALSE      FALSE
P-L-W                    TRUE            FALSE      FALSE
L-W                      TRUE            FALSE      FALSE
P-N-W                    TRUE            FALSE      FALSE
N-W                      TRUE            FALSE      FALSE
P-W                      TRUE            FALSE      FALSE
W                        TRUE            FALSE      FALSE
P-N-L-S                 FALSE            FALSE      FALSE
N-L-S                   FALSE            FALSE      FALSE
P-L-S                   FALSE            FALSE      FALSE
L-S                     FALSE            FALSE      FALSE
P-N-S                   FALSE            FALSE      FALSE
N-S                     FALSE            FALSE      FALSE
P-S                     FALSE            FALSE      FALSE
S                       FALSE            FALSE      FALSE
P-N-L                   FALSE            FALSE      FALSE
N-L                     FALSE            FALSE      FALSE
P-L                     FALSE            FALSE      FALSE
L                       FALSE            FALSE      FALSE
P-N                     FALSE            FALSE      FALSE
N                       FALSE            FALSE      FALSE
P                       FALSE            FALSE      FALSE
                        FALSE            FALSE      FALSE

$regression_results
   Coefficient          SE                Variable
1  0.090581587 0.007949836               Intercept
2 -0.027904170 0.005465512      Remove Punctuation
3 -0.005555395 0.005465512          Remove Numbers
4  0.001057777 0.005465512               Lowercase
5  0.013041366 0.005465512                Stemming
6 -0.020948285 0.005465512        Remove Stopwords
7  0.039945185 0.005465512 Remove Infrequent Terms
8 -0.015944725 0.005465512              Use NGrams
                Model
1 Gun Pretext Results
2 Gun Pretext Results
3 Gun Pretext Results
4 Gun Pretext Results
5 Gun Pretext Results
6 Gun Pretext Results
7 Gun Pretext Results
8 Gun Pretext Results</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>preText_score_plot</span><span class='op'>(</span><span class='va'>preText_results</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="text-as-data-blog-post-2_files/figure-html5/unnamed-chunk-8-1.png" width="624" /></p>
</div>
<p>The lowest score with intercepts according to the graph is N-3 which
removes numbers, and uses n-grams. This plot represents the potential
risk of using more complex pre-processing at the pre-text score goes up
but may remove more information. The highest score belongs to L-S which
is lowercased and stemmed which is quite risky to do.</p>
<p><strong>Explanation Continued:</strong> Looking at the regression
coefficients we see negative scores as usual results and positive
coefficients as unusual ones. In this case removing puncuation,
stopwords, and n-grams would not lead to a great deal of
abnormalilty.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>regression_coefficient_plot</span><span class='op'>(</span><span class='va'>preText_results</span>,
                            remove_intercept <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="text-as-data-blog-post-2_files/figure-html5/unnamed-chunk-9-1.png" width="624" /></p>
</div>
<h4 id="tokens-and-corpus-work">Tokens and Corpus Work</h4>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>top_guns_tokens</span> <span class='op'>&lt;-</span> <span class='fu'>tokens</span><span class='op'>(</span><span class='va'>top_guns_corpus</span><span class='op'>)</span>

<span class='fu'><a href='https://rdrr.io/r/base/print.html'>print</a></span><span class='op'>(</span><span class='va'>top_guns_tokens</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>Tokens consisting of 998 documents.
text1 :
[1] &quot;Smith&quot;    &quot;and&quot;      &quot;Wesson&quot;   &quot;Saturday&quot; &quot;anyone&quot;   &quot;?&quot;       

text2 :
[1] &quot;My&quot;       &quot;two&quot;      &quot;favorite&quot; &quot;9mm&quot;      &quot;s&quot;       

text3 :
 [1] &quot;My&quot;       &quot;Arex&quot;     &quot;Zero&quot;     &quot;1&quot;        &quot;Tactical&quot; &quot;w&quot;       
 [7] &quot;/&quot;        &quot;a&quot;        &quot;Trijicon&quot; &quot;RMR&quot;      &quot;,&quot;        &quot;Viridian&quot;
[ ... and 8 more ]

text4 :
 [1] &quot;Opinion&quot; &quot;of&quot;      &quot;the&quot;     &quot;fnx9&quot;    &quot;?&quot;       &quot;Already&quot;
 [7] &quot;have&quot;    &quot;an&quot;      &quot;xd&quot;      &quot;and&quot;     &quot;a&quot;       &quot;p320&quot;   
[ ... and 10 more ]

text5 :
[1] &quot;Howa&quot; &quot;1500&quot; &quot;in&quot;   &quot;.&quot;    &quot;308&quot; 

text6 :
[1] &quot;A&quot;          &quot;little&quot;     &quot;before&quot;     &quot;and&quot;        &quot;after&quot;     
[6] &quot;comparison&quot; &quot;.&quot;         

[ reached max_ndoc ... 992 more documents ]</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>top_guns_tokens_no_punct</span> <span class='op'>&lt;-</span> <span class='fu'>tokens</span><span class='op'>(</span><span class='va'>top_guns_corpus</span>, 
    remove_punct <span class='op'>=</span> <span class='cn'>T</span><span class='op'>)</span>

<span class='fu'><a href='https://rdrr.io/r/base/print.html'>print</a></span><span class='op'>(</span><span class='va'>top_guns_tokens_no_punct</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>Tokens consisting of 998 documents.
text1 :
[1] &quot;Smith&quot;    &quot;and&quot;      &quot;Wesson&quot;   &quot;Saturday&quot; &quot;anyone&quot;  

text2 :
[1] &quot;My&quot;       &quot;two&quot;      &quot;favorite&quot; &quot;9mm&quot;      &quot;s&quot;       

text3 :
 [1] &quot;My&quot;       &quot;Arex&quot;     &quot;Zero&quot;     &quot;1&quot;        &quot;Tactical&quot; &quot;w&quot;       
 [7] &quot;a&quot;        &quot;Trijicon&quot; &quot;RMR&quot;      &quot;Viridian&quot; &quot;XL5&quot;      &quot;Gen&quot;     
[ ... and 5 more ]

text4 :
 [1] &quot;Opinion&quot; &quot;of&quot;      &quot;the&quot;     &quot;fnx9&quot;    &quot;Already&quot; &quot;have&quot;   
 [7] &quot;an&quot;      &quot;xd&quot;      &quot;and&quot;     &quot;a&quot;       &quot;p320&quot;    &quot;m18&quot;    
[ ... and 6 more ]

text5 :
[1] &quot;Howa&quot; &quot;1500&quot; &quot;in&quot;   &quot;308&quot; 

text6 :
[1] &quot;A&quot;          &quot;little&quot;     &quot;before&quot;     &quot;and&quot;        &quot;after&quot;     
[6] &quot;comparison&quot;

[ reached max_ndoc ... 992 more documents ]</code></pre>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>top_guns_tokens_no_punct_no_upper</span> <span class='op'>&lt;-</span> <span class='fu'>tokens_tolower</span><span class='op'>(</span><span class='va'>top_guns_tokens_no_punct</span><span class='op'>)</span>

<span class='fu'><a href='https://rdrr.io/r/base/print.html'>print</a></span><span class='op'>(</span><span class='va'>top_guns_tokens_no_punct_no_upper</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>Tokens consisting of 998 documents.
text1 :
[1] &quot;smith&quot;    &quot;and&quot;      &quot;wesson&quot;   &quot;saturday&quot; &quot;anyone&quot;  

text2 :
[1] &quot;my&quot;       &quot;two&quot;      &quot;favorite&quot; &quot;9mm&quot;      &quot;s&quot;       

text3 :
 [1] &quot;my&quot;       &quot;arex&quot;     &quot;zero&quot;     &quot;1&quot;        &quot;tactical&quot; &quot;w&quot;       
 [7] &quot;a&quot;        &quot;trijicon&quot; &quot;rmr&quot;      &quot;viridian&quot; &quot;xl5&quot;      &quot;gen&quot;     
[ ... and 5 more ]

text4 :
 [1] &quot;opinion&quot; &quot;of&quot;      &quot;the&quot;     &quot;fnx9&quot;    &quot;already&quot; &quot;have&quot;   
 [7] &quot;an&quot;      &quot;xd&quot;      &quot;and&quot;     &quot;a&quot;       &quot;p320&quot;    &quot;m18&quot;    
[ ... and 6 more ]

text5 :
[1] &quot;howa&quot; &quot;1500&quot; &quot;in&quot;   &quot;308&quot; 

text6 :
[1] &quot;a&quot;          &quot;little&quot;     &quot;before&quot;     &quot;and&quot;        &quot;after&quot;     
[6] &quot;comparison&quot;

[ reached max_ndoc ... 992 more documents ]</code></pre>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>top_guns_tokens_no_punct_no_upper_no_stop</span> <span class='op'>&lt;-</span>    <span class='fu'>tokens_select</span><span class='op'>(</span><span class='va'>top_guns_tokens_no_punct_no_upper</span>, pattern <span class='op'>=</span> <span class='fu'>stopwords</span><span class='op'>(</span><span class='st'>"en"</span><span class='op'>)</span>, selection <span class='op'>=</span> <span class='st'>"remove"</span><span class='op'>)</span>

<span class='fu'><a href='https://rdrr.io/r/base/length.html'>length</a></span><span class='op'>(</span><span class='va'>top_guns_tokens_no_punct_no_upper_no_stop</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>[1] 998</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/print.html'>print</a></span><span class='op'>(</span><span class='va'>top_guns_tokens_no_punct_no_upper_no_stop</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>Tokens consisting of 998 documents.
text1 :
[1] &quot;smith&quot;    &quot;wesson&quot;   &quot;saturday&quot; &quot;anyone&quot;  

text2 :
[1] &quot;two&quot;      &quot;favorite&quot; &quot;9mm&quot;      &quot;s&quot;       

text3 :
 [1] &quot;arex&quot;     &quot;zero&quot;     &quot;1&quot;        &quot;tactical&quot; &quot;w&quot;        &quot;trijicon&quot;
 [7] &quot;rmr&quot;      &quot;viridian&quot; &quot;xl5&quot;      &quot;gen&quot;      &quot;3&quot;        &quot;hogue&quot;   
[ ... and 2 more ]

text4 :
 [1] &quot;opinion&quot;     &quot;fnx9&quot;        &quot;already&quot;     &quot;xd&quot;         
 [5] &quot;p320&quot;        &quot;m18&quot;         &quot;sa&quot;          &quot;da&quot;         
 [9] &quot;interesting&quot; &quot;sure&quot;       

text5 :
[1] &quot;howa&quot; &quot;1500&quot; &quot;308&quot; 

text6 :
[1] &quot;little&quot;     &quot;comparison&quot;

[ reached max_ndoc ... 992 more documents ]</code></pre>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>cnlp_init_udpipe</span><span class='op'>(</span><span class='op'>)</span>

<span class='va'>text_for_top_guns</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/character.html'>as.character</a></span><span class='op'>(</span><span class='va'>top_guns_corpus</span><span class='op'>)</span>

<span class='va'>top_guns_corpus_2</span> <span class='op'>&lt;-</span> <span class='fu'>docvars</span><span class='op'>(</span><span class='va'>top_guns_corpus</span><span class='op'>)</span>

<span class='va'>top_guns_corpus_2</span><span class='op'>$</span><span class='va'>text</span> <span class='op'>&lt;-</span> <span class='va'>text_for_top_guns</span>

<span class='va'>annotated.guns_corpus</span> <span class='op'>&lt;-</span> <span class='fu'>cnlp_annotate</span><span class='op'>(</span><span class='va'>top_guns_corpus_2</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>Processed document 10 of 998
Processed document 20 of 998
Processed document 30 of 998
Processed document 40 of 998
Processed document 50 of 998
Processed document 60 of 998
Processed document 70 of 998
Processed document 80 of 998
Processed document 90 of 998
Processed document 100 of 998
Processed document 110 of 998
Processed document 120 of 998
Processed document 130 of 998
Processed document 140 of 998
Processed document 150 of 998
Processed document 160 of 998
Processed document 170 of 998
Processed document 180 of 998
Processed document 190 of 998
Processed document 200 of 998
Processed document 210 of 998
Processed document 220 of 998
Processed document 230 of 998
Processed document 240 of 998
Processed document 250 of 998
Processed document 260 of 998
Processed document 270 of 998
Processed document 280 of 998
Processed document 290 of 998
Processed document 300 of 998
Processed document 310 of 998
Processed document 320 of 998
Processed document 330 of 998
Processed document 340 of 998
Processed document 350 of 998
Processed document 360 of 998
Processed document 370 of 998
Processed document 380 of 998
Processed document 390 of 998
Processed document 400 of 998
Processed document 410 of 998
Processed document 420 of 998
Processed document 430 of 998
Processed document 440 of 998
Processed document 450 of 998
Processed document 460 of 998
Processed document 470 of 998
Processed document 480 of 998
Processed document 490 of 998
Processed document 500 of 998
Processed document 510 of 998
Processed document 520 of 998
Processed document 530 of 998
Processed document 540 of 998
Processed document 550 of 998
Processed document 560 of 998
Processed document 570 of 998
Processed document 580 of 998
Processed document 590 of 998
Processed document 600 of 998
Processed document 610 of 998
Processed document 620 of 998
Processed document 630 of 998
Processed document 640 of 998
Processed document 650 of 998
Processed document 660 of 998
Processed document 670 of 998
Processed document 680 of 998
Processed document 690 of 998
Processed document 700 of 998
Processed document 710 of 998
Processed document 720 of 998
Processed document 730 of 998
Processed document 740 of 998
Processed document 750 of 998
Processed document 760 of 998
Processed document 770 of 998
Processed document 780 of 998
Processed document 790 of 998
Processed document 800 of 998
Processed document 810 of 998
Processed document 820 of 998
Processed document 830 of 998
Processed document 840 of 998
Processed document 850 of 998
Processed document 860 of 998
Processed document 870 of 998
Processed document 880 of 998
Processed document 890 of 998
Processed document 900 of 998
Processed document 910 of 998
Processed document 920 of 998
Processed document 930 of 998
Processed document 940 of 998
Processed document 950 of 998
Processed document 960 of 998
Processed document 970 of 998
Processed document 980 of 998
Processed document 990 of 998</code></pre>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>top_guns_corpus_tokens</span> <span class='op'>&lt;-</span> <span class='fu'>tokens</span><span class='op'>(</span><span class='va'>top_guns_corpus</span><span class='op'>)</span>

<span class='fu'><a href='https://rdrr.io/r/base/print.html'>print</a></span><span class='op'>(</span><span class='va'>top_guns_corpus_tokens</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>Tokens consisting of 998 documents.
text1 :
[1] &quot;Smith&quot;    &quot;and&quot;      &quot;Wesson&quot;   &quot;Saturday&quot; &quot;anyone&quot;   &quot;?&quot;       

text2 :
[1] &quot;My&quot;       &quot;two&quot;      &quot;favorite&quot; &quot;9mm&quot;      &quot;s&quot;       

text3 :
 [1] &quot;My&quot;       &quot;Arex&quot;     &quot;Zero&quot;     &quot;1&quot;        &quot;Tactical&quot; &quot;w&quot;       
 [7] &quot;/&quot;        &quot;a&quot;        &quot;Trijicon&quot; &quot;RMR&quot;      &quot;,&quot;        &quot;Viridian&quot;
[ ... and 8 more ]

text4 :
 [1] &quot;Opinion&quot; &quot;of&quot;      &quot;the&quot;     &quot;fnx9&quot;    &quot;?&quot;       &quot;Already&quot;
 [7] &quot;have&quot;    &quot;an&quot;      &quot;xd&quot;      &quot;and&quot;     &quot;a&quot;       &quot;p320&quot;   
[ ... and 10 more ]

text5 :
[1] &quot;Howa&quot; &quot;1500&quot; &quot;in&quot;   &quot;.&quot;    &quot;308&quot; 

text6 :
[1] &quot;A&quot;          &quot;little&quot;     &quot;before&quot;     &quot;and&quot;        &quot;after&quot;     
[6] &quot;comparison&quot; &quot;.&quot;         

[ reached max_ndoc ... 992 more documents ]</code></pre>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='va'>annotated.guns_corpus</span><span class='op'>$</span><span class='va'>token</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code># A tibble: 6  11
  doc_id   sid tid   token    token_with_ws lemma    upos  xpos  feats
   &lt;int&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt;    &lt;chr&gt;         &lt;chr&gt;    &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;
1      1     1 1     Smith    &quot;Smith &quot;      Smith    PROPN NNP   Numb
2      1     1 2     and      &quot;and &quot;        and      CCONJ CC    &lt;NA&gt; 
3      1     1 3     Wesson   &quot;Wesson &quot;     Wesson   PROPN NNP   Numb
4      1     1 4     Saturday &quot;Saturday &quot;   Saturday PROPN NNP   Numb
5      1     1 5     anyone   &quot;anyone&quot;      anyone   PRON  NN    Numb
6      1     1 6     ?        &quot;?&quot;           ?        PUNCT .     &lt;NA&gt; 
#  with 2 more variables: tid_source &lt;chr&gt;, relation &lt;chr&gt;</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='va'>annotated.guns_corpus</span><span class='op'>$</span><span class='va'>document</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>  doc_id
1      1
2      2
3      3
4      4
5      5
6      6</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>doc_id_guns</span><span class='op'>&lt;-</span><span class='va'>annotated.guns_corpus</span><span class='op'>$</span><span class='va'>document</span>
<span class='va'>doc_id_guns</span>
</code></pre>
</div>
<pre><code>    doc_id
1        1
2        2
3        3
4        4
5        5
6        6
7        7
8        8
9        9
10      10
11      11
12      12
13      13
14      14
15      15
16      16
17      17
18      18
19      19
20      20
21      21
22      22
23      23
24      24
25      25
26      26
27      27
28      28
29      29
30      30
31      31
32      32
33      33
34      34
35      35
36      36
37      37
38      38
39      39
40      40
41      41
42      42
43      43
44      44
45      45
46      46
47      47
48      48
49      49
50      50
51      51
52      52
53      53
54      54
55      55
56      56
57      57
58      58
59      59
60      60
61      61
62      62
63      63
64      64
65      65
66      66
67      67
68      68
69      69
70      70
71      71
72      72
73      73
74      74
75      75
76      76
77      77
78      78
79      79
80      80
81      81
82      82
83      83
84      84
85      85
86      86
87      87
88      88
89      89
90      90
91      91
92      92
93      93
94      94
95      95
96      96
97      97
98      98
99      99
100    100
101    101
102    102
103    103
104    104
105    105
106    106
107    107
108    108
109    109
110    110
111    111
112    112
113    113
114    114
115    115
116    116
117    117
118    118
119    119
120    120
121    121
122    122
123    123
124    124
125    125
126    126
127    127
128    128
129    129
130    130
131    131
132    132
133    133
134    134
135    135
136    136
137    137
138    138
139    139
140    140
141    141
142    142
143    143
144    144
145    145
146    146
147    147
148    148
149    149
150    150
151    151
152    152
153    153
154    154
155    155
156    156
157    157
158    158
159    159
160    160
161    161
162    162
163    163
164    164
165    165
166    166
167    167
168    168
169    169
170    170
171    171
172    172
173    173
174    174
175    175
176    176
177    177
178    178
179    179
180    180
181    181
182    182
183    183
184    184
185    185
186    186
187    187
188    188
189    189
190    190
191    191
192    192
193    193
194    194
195    195
196    196
197    197
198    198
199    199
200    200
201    201
202    202
203    203
204    204
205    205
206    206
207    207
208    208
209    209
210    210
211    211
212    212
213    213
214    214
215    215
216    216
217    217
218    218
219    219
220    220
221    221
222    222
223    223
224    224
225    225
226    226
227    227
228    228
229    229
230    230
231    231
232    232
233    233
234    234
235    235
236    236
237    237
238    238
239    239
240    240
241    241
242    242
243    243
244    244
245    245
246    246
247    247
248    248
249    249
250    250
251    251
252    252
253    253
254    254
255    255
256    256
257    257
258    258
259    259
260    260
261    261
262    262
263    263
264    264
265    265
266    266
267    267
268    268
269    269
270    270
271    271
272    272
273    273
274    274
275    275
276    276
277    277
278    278
279    279
280    280
281    281
282    282
283    283
284    284
285    285
286    286
287    287
288    288
289    289
290    290
291    291
292    292
293    293
294    294
295    295
296    296
297    297
298    298
299    299
300    300
301    301
302    302
303    303
304    304
305    305
306    306
307    307
308    308
309    309
310    310
311    311
312    312
313    313
314    314
315    315
316    316
317    317
318    318
319    319
320    320
321    321
322    322
323    323
324    324
325    325
326    326
327    327
328    328
329    329
330    330
331    331
332    332
333    333
334    334
335    335
336    336
337    337
338    338
339    339
340    340
341    341
342    342
343    343
344    344
345    345
346    346
347    347
348    348
349    349
350    350
351    351
352    352
353    353
354    354
355    355
356    356
357    357
358    358
359    359
360    360
361    361
362    362
363    363
364    364
365    365
366    366
367    367
368    368
369    369
370    370
371    371
372    372
373    373
374    374
375    375
376    376
377    377
378    378
379    379
380    380
381    381
382    382
383    383
384    384
385    385
386    386
387    387
388    388
389    389
390    390
391    391
392    392
393    393
394    394
395    395
396    396
397    397
398    398
399    399
400    400
401    401
402    402
403    403
404    404
405    405
406    406
407    407
408    408
409    409
410    410
411    411
412    412
413    413
414    414
415    415
416    416
417    417
418    418
419    419
420    420
421    421
422    422
423    423
424    424
425    425
426    426
427    427
428    428
429    429
430    430
431    431
432    432
433    433
434    434
435    435
436    436
437    437
438    438
439    439
440    440
441    441
442    442
443    443
444    444
445    445
446    446
447    447
448    448
449    449
450    450
451    451
452    452
453    453
454    454
455    455
456    456
457    457
458    458
459    459
460    460
461    461
462    462
463    463
464    464
465    465
466    466
467    467
468    468
469    469
470    470
471    471
472    472
473    473
474    474
475    475
476    476
477    477
478    478
479    479
480    480
481    481
482    482
483    483
484    484
485    485
486    486
487    487
488    488
489    489
490    490
491    491
492    492
493    493
494    494
495    495
496    496
497    497
498    498
499    499
500    500
501    501
502    502
503    503
504    504
505    505
506    506
507    507
508    508
509    509
510    510
511    511
512    512
513    513
514    514
515    515
516    516
517    517
518    518
519    519
520    520
521    521
522    522
523    523
524    524
525    525
526    526
527    527
528    528
529    529
530    530
531    531
532    532
533    533
534    534
535    535
536    536
537    537
538    538
539    539
540    540
541    541
542    542
543    543
544    544
545    545
546    546
547    547
548    548
549    549
550    550
551    551
552    552
553    553
554    554
555    555
556    556
557    557
558    558
559    559
560    560
561    561
562    562
563    563
564    564
565    565
566    566
567    567
568    568
569    569
570    570
571    571
572    572
573    573
574    574
575    575
576    576
577    577
578    578
579    579
580    580
581    581
582    582
583    583
584    584
585    585
586    586
587    587
588    588
589    589
590    590
591    591
592    592
593    593
594    594
595    595
596    596
597    597
598    598
599    599
600    600
601    601
602    602
603    603
604    604
605    605
606    606
607    607
608    608
609    609
610    610
611    611
612    612
613    613
614    614
615    615
616    616
617    617
618    618
619    619
620    620
621    621
622    622
623    623
624    624
625    625
626    626
627    627
628    628
629    629
630    630
631    631
632    632
633    633
634    634
635    635
636    636
637    637
638    638
639    639
640    640
641    641
642    642
643    643
644    644
645    645
646    646
647    647
648    648
649    649
650    650
651    651
652    652
653    653
654    654
655    655
656    656
657    657
658    658
659    659
660    660
661    661
662    662
663    663
664    664
665    665
666    666
667    667
668    668
669    669
670    670
671    671
672    672
673    673
674    674
675    675
676    676
677    677
678    678
679    679
680    680
681    681
682    682
683    683
684    684
685    685
686    686
687    687
688    688
689    689
690    690
691    691
692    692
693    693
694    694
695    695
696    696
697    697
698    698
699    699
700    700
701    701
702    702
703    703
704    704
705    705
706    706
707    707
708    708
709    709
710    710
711    711
712    712
713    713
714    714
715    715
716    716
717    717
718    718
719    719
720    720
721    721
722    722
723    723
724    724
725    725
726    726
727    727
728    728
729    729
730    730
731    731
732    732
733    733
734    734
735    735
736    736
737    737
738    738
739    739
740    740
741    741
742    742
743    743
744    744
745    745
746    746
747    747
748    748
749    749
750    750
751    751
752    752
753    753
754    754
755    755
756    756
757    757
758    758
759    759
760    760
761    761
762    762
763    763
764    764
765    765
766    766
767    767
768    768
769    769
770    770
771    771
772    772
773    773
774    774
775    775
776    776
777    777
778    778
779    779
780    780
781    781
782    782
783    783
784    784
785    785
786    786
787    787
788    788
789    789
790    790
791    791
792    792
793    793
794    794
795    795
796    796
797    797
798    798
799    799
800    800
801    801
802    802
803    803
804    804
805    805
806    806
807    807
808    808
809    809
810    810
811    811
812    812
813    813
814    814
815    815
816    816
817    817
818    818
819    819
820    820
821    821
822    822
823    823
824    824
825    825
826    826
827    827
828    828
829    829
830    830
831    831
832    832
833    833
834    834
835    835
836    836
837    837
838    838
839    839
840    840
841    841
842    842
843    843
844    844
845    845
846    846
847    847
848    848
849    849
850    850
851    851
852    852
853    853
854    854
855    855
856    856
857    857
858    858
859    859
860    860
861    861
862    862
863    863
864    864
865    865
866    866
867    867
868    868
869    869
870    870
871    871
872    872
873    873
874    874
875    875
876    876
877    877
878    878
879    879
880    880
881    881
882    882
883    883
884    884
885    885
886    886
887    887
888    888
889    889
890    890
891    891
892    892
893    893
894    894
895    895
896    896
897    897
898    898
899    899
900    900
901    901
902    902
903    903
904    904
905    905
906    906
907    907
908    908
909    909
910    910
911    911
912    912
913    913
914    914
915    915
916    916
917    917
918    918
919    919
920    920
921    921
922    922
923    923
924    924
925    925
926    926
927    927
928    928
929    929
930    930
931    931
932    932
933    933
934    934
935    935
936    936
937    937
938    938
939    939
940    940
941    941
942    942
943    943
944    944
945    945
946    946
947    947
948    948
949    949
950    950
951    951
952    952
953    953
954    954
955    955
956    956
957    957
958    958
959    959
960    960
961    961
962    962
963    963
964    964
965    965
966    966
967    967
968    968
969    969
970    970
971    971
972    972
973    973
974    974
975    975
976    976
977    977
978    978
979    979
980    980
981    981
982    982
983    983
984    984
985    985
986    986
987    987
988    988
989    989
990    990
991    991
992    992
993    993
994    994
995    995
996    996
997    997
998    998</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>doc_id_guns</span><span class='op'>$</span><span class='va'>date</span><span class='op'>&lt;-</span><span class='va'>top_guns_urls_df</span><span class='op'>$</span><span class='va'>date_utc</span>

<span class='va'>annoData</span> <span class='op'>&lt;-</span> <span class='fu'>left_join</span><span class='op'>(</span><span class='va'>doc_id_guns</span>, <span class='va'>annotated.guns_corpus</span><span class='op'>$</span><span class='va'>token</span>, by <span class='op'>=</span> <span class='st'>"doc_id"</span><span class='op'>)</span>

<span class='va'>annoData</span><span class='op'>$</span><span class='va'>date</span><span class='op'>&lt;-</span><span class='fu'><a href='https://rdrr.io/r/base/as.Date.html'>as.Date</a></span><span class='op'>(</span><span class='va'>annoData</span><span class='op'>$</span><span class='va'>date</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>annoData</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>group_by</span><span class='op'>(</span><span class='va'>date</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>summarize</span><span class='op'>(</span>Sentences <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/Extremes.html'>max</a></span><span class='op'>(</span><span class='va'>sid</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'>ggplot</span><span class='op'>(</span><span class='fu'>aes</span><span class='op'>(</span><span class='va'>date</span>, <span class='va'>Sentences</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
    <span class='fu'>geom_line</span><span class='op'>(</span><span class='op'>)</span> <span class='op'>+</span>
    <span class='fu'>geom_smooth</span><span class='op'>(</span><span class='op'>)</span> <span class='op'>+</span>
    <span class='fu'>theme_bw</span><span class='op'>(</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="text-as-data-blog-post-2_files/figure-html5/unnamed-chunk-16-1.png" width="624" /></p>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># calculate readability</span>
<span class='va'>readability</span> <span class='op'>&lt;-</span> <span class='fu'>textstat_readability</span><span class='op'>(</span><span class='va'>top_guns_corpus</span>, 
                                    measure <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"Flesch.Kincaid"</span><span class='op'>)</span><span class='op'>)</span> 

<span class='co'># add in a chapter number</span>
<span class='va'>readability</span><span class='op'>$</span><span class='va'>chapter</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>1</span><span class='op'>:</span><span class='fu'><a href='https://rdrr.io/r/base/nrow.html'>nrow</a></span><span class='op'>(</span><span class='va'>readability</span><span class='op'>)</span><span class='op'>)</span>

<span class='co'># plot results</span>
<span class='fu'>ggplot</span><span class='op'>(</span><span class='va'>readability</span>, <span class='fu'>aes</span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>chapter</span>, y <span class='op'>=</span> <span class='va'>Flesch.Kincaid</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>geom_line</span><span class='op'>(</span><span class='op'>)</span> <span class='op'>+</span> 
  <span class='fu'>geom_smooth</span><span class='op'>(</span><span class='op'>)</span> <span class='op'>+</span> 
  <span class='fu'>theme_bw</span><span class='op'>(</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="text-as-data-blog-post-2_files/figure-html5/unnamed-chunk-17-1.png" width="624" /></p>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>readability</span> <span class='op'>&lt;-</span> <span class='fu'>textstat_readability</span><span class='op'>(</span><span class='va'>top_guns_corpus</span>, 
                                    measure <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"Flesch.Kincaid"</span>, <span class='st'>"FOG"</span>, <span class='st'>"Coleman.Liau.grade"</span><span class='op'>)</span><span class='op'>)</span> 

<span class='co'># add in a chapter number</span>

<span class='va'>readability</span><span class='op'>$</span><span class='va'>post</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>1</span><span class='op'>:</span><span class='fu'><a href='https://rdrr.io/r/base/nrow.html'>nrow</a></span><span class='op'>(</span><span class='va'>readability</span><span class='op'>)</span><span class='op'>)</span>

<span class='co'># plot results</span>
<span class='fu'>ggplot</span><span class='op'>(</span><span class='va'>readability</span>, <span class='fu'>aes</span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>post</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>geom_line</span><span class='op'>(</span><span class='fu'>aes</span><span class='op'>(</span>y <span class='op'>=</span> <span class='va'>Flesch.Kincaid</span><span class='op'>)</span>, color <span class='op'>=</span> <span class='st'>"black"</span><span class='op'>)</span> <span class='op'>+</span> 
  <span class='fu'>geom_line</span><span class='op'>(</span><span class='fu'>aes</span><span class='op'>(</span>y <span class='op'>=</span> <span class='va'>FOG</span><span class='op'>)</span>, color <span class='op'>=</span> <span class='st'>"red"</span><span class='op'>)</span> <span class='op'>+</span> 
  <span class='fu'>geom_line</span><span class='op'>(</span><span class='fu'>aes</span><span class='op'>(</span>y <span class='op'>=</span> <span class='va'>Coleman.Liau.grade</span><span class='op'>)</span>, color <span class='op'>=</span> <span class='st'>"blue"</span><span class='op'>)</span> <span class='op'>+</span> 
  <span class='fu'>theme_bw</span><span class='op'>(</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="text-as-data-blog-post-2_files/figure-html5/unnamed-chunk-18-1.png" width="624" /></p>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>annoData</span><span class='op'>$</span><span class='va'>date</span><span class='op'>&lt;-</span><span class='fu'><a href='https://rdrr.io/r/base/as.Date.html'>as.Date</a></span><span class='op'>(</span><span class='va'>annoData</span><span class='op'>$</span><span class='va'>date</span><span class='op'>)</span>

<span class='va'>readability</span><span class='op'>$</span><span class='va'>added_dates</span><span class='op'>&lt;-</span><span class='fu'><a href='https://rdrr.io/r/base/as.Date.html'>as.Date</a></span><span class='op'>(</span><span class='va'>top_guns_urls_df</span><span class='op'>$</span><span class='va'>date_utc</span><span class='op'>)</span>

<span class='fu'>ggplot</span><span class='op'>(</span><span class='va'>readability</span>, <span class='fu'>aes</span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>added_dates</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>geom_smooth</span><span class='op'>(</span><span class='fu'>aes</span><span class='op'>(</span>y <span class='op'>=</span> <span class='va'>Flesch.Kincaid</span><span class='op'>)</span>, color <span class='op'>=</span> <span class='st'>"black"</span><span class='op'>)</span> <span class='op'>+</span> 
  <span class='fu'>geom_smooth</span><span class='op'>(</span><span class='fu'>aes</span><span class='op'>(</span>y <span class='op'>=</span> <span class='va'>FOG</span><span class='op'>)</span>, color <span class='op'>=</span> <span class='st'>"red"</span><span class='op'>)</span> <span class='op'>+</span> 
  <span class='fu'>geom_smooth</span><span class='op'>(</span><span class='fu'>aes</span><span class='op'>(</span>y <span class='op'>=</span> <span class='va'>Coleman.Liau.grade</span><span class='op'>)</span>, color <span class='op'>=</span> <span class='st'>"blue"</span><span class='op'>)</span> <span class='op'>+</span> 
  <span class='fu'>theme_minimal</span><span class='op'>(</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="text-as-data-blog-post-2_files/figure-html5/unnamed-chunk-19-1.png" width="624" /></p>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/stats/cor.html'>cor</a></span><span class='op'>(</span><span class='va'>readability</span><span class='op'>$</span><span class='va'>Flesch.Kincaid</span>, <span class='va'>readability</span><span class='op'>$</span><span class='va'>FOG</span>, use <span class='op'>=</span> <span class='st'>"complete.obs"</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>[1] 0.8007756</code></pre>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/stats/cor.html'>cor</a></span><span class='op'>(</span><span class='va'>readability</span><span class='op'>$</span><span class='va'>Flesch.Kincaid</span>, <span class='va'>readability</span><span class='op'>$</span><span class='va'>Coleman.Liau.grade</span>, use <span class='op'>=</span> <span class='st'>"complete.obs"</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>[1] 0.7308223</code></pre>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/stats/cor.html'>cor</a></span><span class='op'>(</span><span class='va'>readability</span><span class='op'>$</span><span class='va'>FOG</span>, <span class='va'>readability</span><span class='op'>$</span><span class='va'>Coleman.Liau.grade</span>, use <span class='op'>=</span> <span class='st'>"complete.obs"</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>[1] 0.5551364</code></pre>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'>#sentimetnsdf&lt;-get_sentiments("nrc")</span>

<span class='co'>#write.csv(sentimetnsdf, file = "sentimetnsdf.csv")</span>

<span class='co'>#save(sentimetnsdf, file="sentimetnsdf_2")</span>
</code></pre>
</div>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://readr.tidyverse.org'>readr</a></span><span class='op'>)</span>
<span class='va'>sentimetnsdf</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://readr.tidyverse.org/reference/read_delim.html'>read_csv</a></span><span class='op'>(</span><span class='st'>"/Users/noahmilstein/Desktop/Spring 2022/Textasdata/text_as_data_work/sentimetnsdf.csv"</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>top_guns_urls_df_2</span><span class='op'>&lt;-</span><span class='va'>top_guns_urls_df</span>
<span class='va'>top_guns_urls_df_2</span><span class='op'>$</span><span class='va'>text</span><span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/seq.html'>seq</a></span><span class='op'>(</span><span class='fl'>1</span>, <span class='fl'>998</span>, by<span class='op'>=</span><span class='fl'>1</span><span class='op'>)</span>


<span class='va'>nrc_joy</span> <span class='op'>&lt;-</span> <span class='va'>sentimetnsdf</span> <span class='op'>%&gt;%</span> 
  <span class='fu'><a href='https://rdrr.io/r/stats/filter.html'>filter</a></span><span class='op'>(</span><span class='va'>sentiment</span> <span class='op'>==</span> <span class='st'>"joy"</span><span class='op'>)</span>

<span class='va'>tidy_posts_for_guns</span> <span class='op'>&lt;-</span> <span class='va'>top_guns_urls_df_2</span> <span class='op'>%&gt;%</span>
  <span class='fu'>unnest_tokens</span><span class='op'>(</span><span class='va'>word</span>, <span class='va'>title</span><span class='op'>)</span> 

<span class='va'>tidy_posts_for_guns</span> <span class='op'>%&gt;%</span>
  <span class='fu'>inner_join</span><span class='op'>(</span><span class='va'>nrc_joy</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'>count</span><span class='op'>(</span><span class='va'>word</span>, sort <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>           word  n
1          love 24
2       finally 22
3         happy 18
4           fun 14
5      favorite 12
6         found 10
7          good  8
8      birthday  6
9        pretty  6
10         safe  6
11        elite  5
12       friend  5
13         baby  4
14        green  4
15    beautiful  3
16      feeling  3
17         gift  3
18     inspired  3
19          joy  3
20        pride  3
21        clean  2
22      embrace  2
23      excited  2
24        money  2
25      perfect  2
26        share  2
27         star  2
28        sunny  2
29 appreciation  1
30          art  1
31       beauty  1
32  celebrating  1
33     classics  1
34      content  1
35       create  1
36         deal  1
37      diamond  1
38        fancy  1
39    favorable  1
40      fitting  1
41         glow  1
42          god  1
43         hope  1
44         kind  1
45        laugh  1
46       liking  1
47       loving  1
48        lucky  1
49        merry  1
50       mighty  1
51       mother  1
52        music  1
53       pastry  1
54        peace  1
55       picnic  1
56      pleased  1
57     powerful  1
58      present  1
59     progress  1
60      promise  1
61        proud  1
62      respect  1
63        score  1
64        smile  1
65      special  1
66     splendid  1
67     surprise  1
68        teach  1
69        treat  1
70       wealth  1</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>tidy_posts_for_guns_sentiment</span> <span class='op'>&lt;-</span> <span class='va'>tidy_posts_for_guns</span> <span class='op'>%&gt;%</span>
  <span class='fu'>inner_join</span><span class='op'>(</span><span class='va'>sentimetnsdf</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'>count</span><span class='op'>(</span><span class='va'>text</span>, <span class='va'>sentiment</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'>pivot_wider</span><span class='op'>(</span>names_from <span class='op'>=</span> <span class='va'>sentiment</span>, values_from <span class='op'>=</span> <span class='va'>n</span>, values_fill <span class='op'>=</span> <span class='fl'>0</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>mutate</span><span class='op'>(</span>sentiment <span class='op'>=</span> <span class='va'>positive</span> <span class='op'>-</span> <span class='va'>negative</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>tidy_posts_for_guns_sentiment</span>
</code></pre>
</div>
<pre><code># A tibble: 580  12
    text trust   joy positive anger anticipation disgust  fear
   &lt;dbl&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt; &lt;int&gt;        &lt;int&gt;   &lt;int&gt; &lt;int&gt;
 1     1     1     0        0     0            0       0     0
 2     2     1     1        1     0            0       0     0
 3     4     0     0        1     0            0       0     0
 4     9     1     0        2     0            0       0     0
 5    11     0     0        1     2            1       1     1
 6    12     0     0        1     0            0       0     0
 7    14     2     2        3     0            3       0     0
 8    15     1     1        3     0            2       0     0
 9    16     2     1        1     0            1       0     0
10    22     0     0        0     1            0       0     1
#  with 570 more rows, and 4 more variables: negative &lt;int&gt;,
#   sadness &lt;int&gt;, surprise &lt;int&gt;, sentiment &lt;int&gt;</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>sentimetnsdf</span>
</code></pre>
</div>
<pre><code># A tibble: 13,875  3
    ...1 word        sentiment
   &lt;dbl&gt; &lt;chr&gt;       &lt;chr&gt;    
 1     1 abacus      trust    
 2     2 abandon     fear     
 3     3 abandon     negative 
 4     4 abandon     sadness  
 5     5 abandoned   anger    
 6     6 abandoned   fear     
 7     7 abandoned   negative 
 8     8 abandoned   sadness  
 9     9 abandonment anger    
10    10 abandonment fear     
#  with 13,865 more rows</code></pre>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>nrc_guns_word_counts</span> <span class='op'>&lt;-</span> <span class='va'>tidy_posts_for_guns</span> <span class='op'>%&gt;%</span>
  <span class='fu'>inner_join</span><span class='op'>(</span><span class='va'>sentimetnsdf</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'>count</span><span class='op'>(</span><span class='va'>word</span>, <span class='va'>sentiment</span>, sort <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'>ungroup</span><span class='op'>(</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>nrc_guns_word_counts</span> <span class='op'>%&gt;%</span>
  <span class='fu'>group_by</span><span class='op'>(</span><span class='va'>sentiment</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'>slice_max</span><span class='op'>(</span><span class='va'>n</span>, n <span class='op'>=</span> <span class='fl'>10</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>ungroup</span><span class='op'>(</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'>mutate</span><span class='op'>(</span>word <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/stats/reorder.factor.html'>reorder</a></span><span class='op'>(</span><span class='va'>word</span>, <span class='va'>n</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'>ggplot</span><span class='op'>(</span><span class='fu'>aes</span><span class='op'>(</span><span class='va'>n</span>, <span class='va'>word</span>, fill <span class='op'>=</span> <span class='va'>sentiment</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>geom_col</span><span class='op'>(</span>show.legend <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>facet_wrap</span><span class='op'>(</span><span class='op'>~</span><span class='va'>sentiment</span>, scales <span class='op'>=</span> <span class='st'>"free_y"</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>labs</span><span class='op'>(</span>x <span class='op'>=</span> <span class='st'>"Contribution to sentiment"</span>,
       y <span class='op'>=</span> <span class='cn'>NULL</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="text-as-data-blog-post-2_files/figure-html5/unnamed-chunk-28-1.png" width="624" /></p>
</div>
<h3 id="sentiment-results-using-nrc">Sentiment Results Using NRC</h3>
<p><strong>Explanation:</strong> Using nrc appears to have had some
unintended effects that may require an analysis of the specific words
used to describe sentiment. One difficult part of the data being used is
that firearms, and the words used to describe them, are percieved</p>
<div class="sourceCode" id="cb21"><pre
class="sourceCode r distill-force-highlighting-css"><code class="sourceCode r"></code></pre></div>
<!--radix_placeholder_article_footer-->
<!--/radix_placeholder_article_footer-->
</div>

<div class="d-appendix">
</div>


<!--radix_placeholder_site_after_body-->
<!--/radix_placeholder_site_after_body-->
<!--radix_placeholder_appendices-->
<div class="appendix-bottom">
  <h3 id="citation">Citation</h3>
  <p>For attribution, please cite this work as</p>
  <pre class="citation-appendix short">Milstein (2022, March 3). Noah_Milstein_Blog: Text as Data Blog Post 2. Retrieved from https://nmilsteinuma.github.io/posts/2022-03-03-text-as-data-blog-post-2/</pre>
  <p>BibTeX citation</p>
  <pre class="citation-appendix long">@misc{milstein2022text,
  author = {Milstein, Noah},
  title = {Noah_Milstein_Blog: Text as Data Blog Post 2},
  url = {https://nmilsteinuma.github.io/posts/2022-03-03-text-as-data-blog-post-2/},
  year = {2022}
}</pre>
</div>
<!--/radix_placeholder_appendices-->
<!--radix_placeholder_navigation_after_body-->
<!--/radix_placeholder_navigation_after_body-->

</body>

</html>
